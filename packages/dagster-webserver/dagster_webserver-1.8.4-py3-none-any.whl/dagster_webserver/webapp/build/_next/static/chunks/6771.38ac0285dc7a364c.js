"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6771],{36771:function(e,t,n){n.r(t),n.d(t,{CodeLocationsPage:function(){return ef},CodeLocationsPageContent:function(){return eg},default:function(){return ev}});var o=n(52322),i=n(14934),r=n(74159),s=n(35292),l=n(74580),a=n(2784),c=n(9108),d=n(77265),x=n(53476);let u=(e,t)=>{let n=[],o=t.reduce((e,t)=>(e[t.name]=t,e),{});for(let t of e){var i,r;let e;let s=o[t.name];e="LOADING"===t.loadStatus?"Updating":(null==s?void 0:s.updatedTimestamp)!==t.updateTimestamp?"Loading":(null==s?void 0:null===(i=s.locationOrLoadError)||void 0===i?void 0:i.__typename)==="PythonError"?"Failed":"Loaded",(null==s?void 0:null===(r=s.locationOrLoadError)||void 0===r?void 0:r.__typename)==="RepositoryLocation"?s.locationOrLoadError.repositories.forEach(o=>{n.push({type:"repository",locationStatus:t,locationEntry:s,repository:o,status:e})}):n.push({type:"location",locationStatus:t,locationEntry:s||null,status:e})}return n},h=(e,t,n)=>{let o=t.toLocaleLowerCase();return e.filter(e=>{var t;return(null===(t=n.status)||void 0===t||!t.length||!!n.status.includes(e.status))&&("repository"!==e.type?e.locationStatus.name.toLocaleLowerCase().includes(o):e.locationStatus.name.toLocaleLowerCase().includes(o)||e.repository.name.toLocaleLowerCase().includes(o))})},p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=u(e,t),r=h(i,n,o);return{flattened:i,filtered:r}};var j=n(4378),m=n(90483),g=n(5343),f=n(74302),v=n(81602),y=n(100);let w=()=>{let{loading:e,locationEntries:t}=(0,a.useContext)(y.C5),n=(0,x.sJ)(g.n),[i,r]=(0,a.useState)(""),s=(0,a.useCallback)(e=>{r(e.target.value)},[]),l=i.toLocaleLowerCase(),[c,d]=(0,j.q)({encode:e=>{let{status:t}=e;return{status:(null==t?void 0:t.length)?JSON.stringify(t):void 0}},decode:e=>({status:e.status?JSON.parse(e.status):[]})}),{flattened:u,filtered:h}=(0,a.useMemo)(()=>{var e;return p((null==n?void 0:null===(e=n.locationStatusesOrError)||void 0===e?void 0:e.__typename)==="WorkspaceLocationStatusEntries"?n.locationStatusesOrError.entries:[],t,l,c)},[t,l,c,n]),w=(0,v.im)({name:"Status",icon:"tag",allValues:(0,a.useMemo)(()=>["Failed","Loaded","Updating","Loading"].map(e=>({key:e,value:e,match:[e]})),[]),menuWidth:"300px",renderLabel:e=>{let{value:t}=e;return(0,o.jsx)(m.rd,{text:t})},getStringValue:e=>e,state:c.status,onStateChanged:e=>{d({status:Array.from(e)})},matchType:"all-of",canSelectAll:!1,allowMultipleSelections:!0}),{button:C,activeFiltersJsx:b}=(0,f.m)({filters:[w]});return{button:C,activeFiltersJsx:b,onChangeSearch:s,loading:e,flattened:u,filtered:h,searchValue:i}};var C=n(69737),b=n(20171),L=n(72447),E=n(79106),S=n(37483),O=n(88510),N=n(53664),k=n(38491),V=n(47933),_=n(35505),I=n(60603),z=n(55010),T=n(21993),U=n(92506),$=n(1747),D=n(20156),M=n(45984);let q=e=>{var t;let{locationNode:n}=e,[i,r]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),c=null,d=null;return(null===(t=n.locationOrLoadError)||void 0===t?void 0:t.__typename)==="RepositoryLocation"&&null!==n.locationOrLoadError.dagsterLibraryVersions&&(c=(0,o.jsx)(I.sN,{icon:"info",text:"View Dagster libraries",onClick:()=>l(!0)}),d=(0,o.jsx)(F,{libraries:n.locationOrLoadError.dagsterLibraryVersions,isOpen:s,setIsOpen:l})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(z.J,{position:"bottom-left",content:(0,o.jsxs)(I.v2,{children:[(0,o.jsx)(I.sN,{icon:"info",text:"View configuration",onClick:()=>r(!0)}),c]}),children:(0,o.jsx)(k.zx,{icon:(0,o.jsx)(T.JO,{name:"expand_more"})})}),(0,o.jsx)(P,{metadata:n.displayMetadata,isOpen:i,setIsOpen:r}),d]})},P=e=>{let{isOpen:t,setIsOpen:n,metadata:i}=e;return(0,o.jsxs)(U.Vq,{title:"Code location configuration",icon:"info",isOpen:t,onClose:()=>n(!1),style:{width:"600px"},children:[(0,o.jsx)(R,{displayMetadata:i}),(0,o.jsx)(U.cN,{topBorder:!0,children:(0,o.jsx)(k.zx,{onClick:()=>n(!1),intent:"primary",children:"Done"})})]})},F=e=>{let{isOpen:t,setIsOpen:n,libraries:i}=e;return(0,o.jsxs)(U.Vq,{title:"Dagster library versions",icon:"info",isOpen:t,onClose:()=>n(!1),style:{width:"600px"},children:[(0,o.jsxs)($.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Library"}),(0,o.jsx)("th",{children:"Version"})]})}),(0,o.jsx)("tbody",{children:i.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.version})]},e.name))})]}),(0,o.jsx)(U.cN,{topBorder:!0,children:(0,o.jsx)(k.zx,{onClick:()=>n(!1),intent:"primary",children:"Done"})})]})},R=e=>{let{displayMetadata:t}=e,n=(0,a.useMemo)(()=>{let e=t.reduce((e,t)=>(e[t.key]=t.value,e),{});return M.Pz(e)},[t]);return(0,o.jsx)(D.u,{value:n,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})};var A=n(35002),J=n(39013),W=n(43212),H=n(89891),Z=n(81306),B=n(50309),G=n(85227),Q=n(22203),X=n(68954);let K=e=>{let{metadata:t}=e,n=(0,G.m)(),i=t.find(e=>{let{key:t}=e;return"image"===t}),r=(null==i?void 0:i.value)||"",s=(0,a.useCallback)(async()=>{n(r),await (0,B.B7)({intent:"success",icon:"done",message:"Image string copied!"})},[n,r]);return i?(0,o.jsxs)(Y,{flex:{direction:"row",gap:4},children:[(0,o.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,o.jsx)(A.u,{content:"Click to copy",placement:"top",display:"block",children:(0,o.jsx)("button",{onClick:s,children:(0,o.jsx)(N.g,{text:i.value})})})]}):null},Y=(0,_.ZP)(i.x).withConfig({componentId:"sc-2baaf57f-0"})(["width:100%;color:",";font-size:12px;.bp4-popover2-target{overflow:hidden;}button{background:",";border:none;color:",";cursor:pointer;font-size:12px;overflow:hidden;padding:0;margin:0;width:100%;:focus{outline:none;}}"],J.$(),J.v8(),J.$()),ee=e=>{let{metadata:t}=e,n=t.find(e=>{let{key:t}=e;return"module_name"===t||"package_name"===t||"python_file"===t});return n?(0,o.jsxs)(i.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:J.$(),fontSize:12},children:[(0,o.jsxs)("span",{style:{fontWeight:500},children:[n.key,":"]}),(0,o.jsx)(N.g,{text:n.value})]}):null},et=e=>{var t;let{locationStatus:n,locationOrError:r}=e,[s,l]=(0,a.useState)(!1),c=(0,a.useMemo)(()=>(0,X.je)(n.name),[n.name]),{reloading:d,tryReload:x}=(0,X.Dc)({scope:"location",reloadFn:c});return"LOADING"===n.loadStatus?(0,o.jsx)(W.V,{minimal:!0,intent:"primary",children:"Updating..."}):(null==r?void 0:r.updatedTimestamp)!==n.updateTimestamp?(0,o.jsx)(W.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null==r?void 0:null===(t=r.locationOrLoadError)||void 0===t?void 0:t.__typename)==="PythonError"?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.x,{flex:{alignItems:"center",gap:12},children:[(0,o.jsx)(W.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,o.jsx)(H.Z,{onClick:()=>l(!0),children:(0,o.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,o.jsx)(Z.p,{location:n.name,isOpen:s,error:r.locationOrLoadError,reloading:d,onDismiss:()=>l(!1),onTryReload:()=>x()})]}):(0,o.jsx)(W.V,{minimal:!0,intent:"success",children:"Loaded"})},en=e=>{let{location:t}=e;return(0,o.jsx)(Q.s,{location:t,ChildComponent:e=>{let{reloading:t,tryReload:n,hasReloadPermission:r}=e;return(0,o.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,o.jsx)(A.u,{content:r?"":Q.H,canShow:!r,useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(k.zx,{icon:(0,o.jsx)(T.JO,{name:"refresh"}),disabled:!r,loading:t,onClick:()=>n(),children:"Reload"})})})}})};var eo=n(10539),ei=n(44900);let er=e=>{let{repo:t,repoAddress:n}=e,r=t.assetGroups.length,s=t.pipelines.filter(e=>{let{name:t}=e;return!(0,ei.pv)(t)}).length,l=t.schedules.length,a=t.sensors.length;return(0,o.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(A.u,{content:1===r?"1 asset group":"".concat(r," asset groups"),placement:"top",children:(0,o.jsx)(es,{to:(0,eo.$U)(n,"/assets"),children:(0,o.jsx)(W.V,{interactive:!0,icon:"asset_group",children:r})})}),(0,o.jsx)(A.u,{content:1===s?"1 job":"".concat(s," jobs"),placement:"top",children:(0,o.jsx)(es,{to:(0,eo.$U)(n,"/jobs"),children:(0,o.jsx)(W.V,{interactive:!0,icon:"job",children:s})})}),(0,o.jsx)(A.u,{content:1===l?"1 schedule":"".concat(l," schedules"),placement:"top",children:(0,o.jsx)(es,{to:(0,eo.$U)(n,"/schedules"),children:(0,o.jsx)(W.V,{interactive:!0,icon:"schedule",children:l})})}),(0,o.jsx)(A.u,{content:1===a?"1 sensor":"".concat(a," sensors"),placement:"top",children:(0,o.jsx)(es,{to:(0,eo.$U)(n,"/sensors"),children:(0,o.jsx)(W.V,{interactive:!0,icon:"sensors",children:a})})})]})},es=(0,_.ZP)(V.rU).withConfig({componentId:"sc-b34b9578-0"})([":hover,:active{outline:none;text-decoration:none;}"]);var el=n(65822),ea=n(22563),ec=n(35599),ed=n(17008);let ex="3fr 1fr 1fr 240px 160px",eu=a.forwardRef((e,t)=>{let{locationEntry:n,locationStatus:i,index:r}=e,{name:s}=i;return(0,o.jsx)("div",{ref:t,"data-index":r,children:(0,o.jsxs)(ej,{border:"bottom",children:[(0,o.jsx)(ed.E5,{children:(0,o.jsx)(N.g,{text:s})}),(0,o.jsx)(ed.E5,{children:(0,o.jsx)("div",{children:(0,o.jsx)(et,{locationStatus:i,locationOrError:n})})}),(0,o.jsx)(ed.E5,{children:(0,o.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,o.jsx)(ec.C,{unixTimestamp:i.updateTimestamp})})}),(0,o.jsx)(ed.E5,{children:"–"}),(0,o.jsx)(ed.E5,{children:(0,o.jsxs)(k.zH,{children:[(0,o.jsx)(en,{location:s}),n?(0,o.jsx)(q,{locationNode:n}):null]})})]})})}),eh=a.forwardRef((e,t)=>{let{locationEntry:n,locationStatus:r,repository:s,index:l}=e,a=(0,el.kQ)(s.name,s.location.name),c=[...n.displayMetadata,...s.displayMetadata];return(0,o.jsx)("div",{ref:t,"data-index":l,children:(0,o.jsxs)(ej,{border:"bottom",children:[(0,o.jsx)(ed.E5,{children:(0,o.jsxs)(i.x,{flex:{direction:"column",gap:4},children:[(0,o.jsx)("div",{style:{fontWeight:500},children:(0,o.jsx)(V.rU,{to:(0,eo.$U)(a),children:(0,o.jsx)(N.g,{text:(0,ea.Uz)(a)})})}),(0,o.jsx)(K,{metadata:c}),(0,o.jsx)(ee,{metadata:c})]})}),(0,o.jsx)(ed.E5,{children:(0,o.jsx)("div",{children:(0,o.jsx)(et,{locationStatus:r,locationOrError:n})})}),(0,o.jsx)(ed.E5,{children:(0,o.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,o.jsx)(ec.C,{unixTimestamp:r.updateTimestamp})})}),(0,o.jsx)(ed.E5,{children:(0,o.jsx)(er,{repo:s,repoAddress:a})}),(0,o.jsx)(ed.E5,{style:{alignItems:"flex-end"},children:(0,o.jsxs)(k.zH,{children:[(0,o.jsx)(en,{location:r.name}),(0,o.jsx)(q,{locationNode:n})]})})]})})}),ep=()=>(0,o.jsxs)(ed.VJ,{templateColumns:ex,sticky:!0,children:[(0,o.jsx)(ed.qN,{children:"Name"}),(0,o.jsx)(ed.qN,{children:"Status"}),(0,o.jsx)(ed.qN,{children:"Updated"}),(0,o.jsx)(ed.qN,{children:"Definitions"}),(0,o.jsx)(ed.qN,{style:{textAlign:"right"},children:"Actions"})]}),ej=(0,_.ZP)(i.x).withConfig({componentId:"sc-fcc5ee4e-0"})(["display:grid;grid-template-columns:",";"],ex),em=e=>{var t,n;let{loading:r,codeLocations:s,searchValue:l}=e,c=(0,a.useRef)(null),d=(0,O.MG)({count:s.length,getScrollElement:()=>c.current,estimateSize:()=>64,overscan:10}),x=d.getTotalSize(),u=d.getVirtualItems();return r&&!s.length?(0,o.jsxs)(i.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,o.jsx)(E.$,{purpose:"body-text"}),(0,o.jsx)("div",{children:"Loading…"})]}):s.length?(0,o.jsxs)(ed.W2,{ref:c,children:[(0,o.jsx)(ep,{}),(0,o.jsx)(ed.Nh,{$totalHeight:x,children:(0,o.jsx)(ed.HR,{$start:null!==(n=null===(t=u[0])||void 0===t?void 0:t.start)&&void 0!==n?n:0,children:u.map(e=>{let{index:t,key:n}=e,i=s[t];return"location"===i.type?(0,o.jsx)(eu,{index:t,locationEntry:i.locationEntry,locationStatus:i.locationStatus,ref:d.measureElement},n):(0,o.jsx)(eh,{index:t,locationStatus:i.locationStatus,locationEntry:i.locationEntry,repository:i.repository,ref:d.measureElement},n)})})})]}):l?(0,o.jsx)(i.x,{padding:{vertical:32},children:(0,o.jsx)(S.t,{icon:"folder",title:"No matching code locations",description:(0,o.jsxs)("div",{children:["No code locations were found for search query ",(0,o.jsx)("strong",{children:l}),"."]})})}):(0,o.jsx)(i.x,{padding:{vertical:32},children:(0,o.jsx)(S.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},eg=()=>{(0,C.Px)(),(0,b.j)("Code locations");let{activeFiltersJsx:e,flattened:t,button:n,loading:l,filtered:a,onChangeSearch:c,searchValue:d}=w(),x=t.length,u=x>10;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[(0,o.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[n,u?(0,o.jsx)(r.oi,{icon:"search",value:d,onChange:c,placeholder:"Filter code locations by name…",style:{width:"400px"}}):(0,o.jsx)(s.pm,{id:"repository-locations",children:l||!x?"Code locations":1===x?"1 code location":"".concat(x," code locations")})]}),(0,o.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[u?(0,o.jsx)("div",{children:"".concat(x," code locations")}):null,(0,o.jsx)(L.i,{})]})]}),(0,o.jsx)(em,{loading:l,codeLocations:a,searchValue:d}),e.length?(0,o.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},padding:{top:8,horizontal:24},children:e}):null]})},ef=()=>{let{pageTitle:e}=a.useContext(c.N);return(0,o.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(l.m,{title:(0,o.jsx)(s.X6,{children:e}),tabs:(0,o.jsx)(d.Z,{tab:"locations"})}),(0,o.jsx)(eg,{})]})};var ev=ef}}]);
//# sourceMappingURL=6771.38ac0285dc7a364c.js.map