[tool.poetry]
name = "sihl"
version = "0.0.0-dev0"
description = "Simple Image Heads and Layers"
authors = ["Jon <jon@sihl.ai>"]
readme = "README.md"
license = "Apache-2.0"
homepage = "https://sihl.ai"
# repository = "https://github.com/sihlAI/sihl"

[tool.poetry.dependencies]
python = ">=3.9, <3.11"
torch = "^2.3.1"
torchvision = "^0.18.1"
torchmetrics = "^1.4.0.post0"
timm = { version = "^1.0.7", optional = true }
tensorboard = { version = "^2.17.0", optional = true }
faster-coco-eval = { version = "^1.5.7", optional = true }
lightning = { version = "^2.3.3", optional = true }
matplotlib = { version = "^3.9.1", optional = true }
onnx = { version = "^1.16.1", optional = true }
onnxruntime = { version = "^1.18.1", optional = true }
onnxsim = { version = "^0.4.36", optional = true }

[tool.poetry.group.dev.dependencies]
torch = "^2.3.1"
torchvision = "^0.18.1"
torchmetrics = "^1.4.0.post0"
timm = "^1.0.7"
tensorboard = "^2.17.0"
faster-coco-eval = "^1.5.7"
lightning = "^2.3.3"
matplotlib = "^3.9.1"
onnx = "^1.16.1"
onnxruntime = "^1.18.1"
onnxsim = "^0.4.36"
torchinfo = "^1.7.2"
types-pyyaml = "^6.0.12.10"
kaggle = "^1.6.14"
rich = "^13.7.1"
ruff = "^0.5.3"
coverage = "^7.6.0"
pyright = "^1.1.372"
typer = "^0.12.3"

[tool.poetry.extras]
all = [
    "timm",
    "lightning",
    "tensorboard",
    "matplotlib",
    "onnx",
    "onnxruntime",
    "onnxsim",
]
timm = ["timm"]
lightning = ["lightning"]
onnx = ["onnx", "onnxruntime", "onnxsim"]

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.coverage.paths]
source = ["src", "*/site-packages"]
tests = ["tests", "*/tests"]

[tool.coverage.run]
branch = true
source = ["sihl", "tests"]

[tool.coverage.report]
show_missing = true
fail_under = 75

[tool.pyright]
venvPath = "."
venv = ".venv"
