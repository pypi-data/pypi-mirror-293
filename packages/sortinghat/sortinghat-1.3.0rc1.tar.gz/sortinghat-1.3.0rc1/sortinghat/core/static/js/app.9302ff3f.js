(()=>{"use strict";var e={22387:(e,t,n)=>{var r=n(41034),o=(n(23792),n(3362),n(69085),n(9391),n(53751)),a=(n(62010),n(20641)),i=n(90033),s=n(96450),u=n(30249),c=n(13892),l=n(7511),f=n(41720),d=n(79669),p=n(69915),m=n(57254),h=n(4913),g=n(88249),v=["href","onClick"],b={key:0};function k(e,t,n,r,k,y){var w=(0,a.g2)("router-link"),_=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(s.E,null,{default:(0,a.k6)((function(){return[(0,a.bF)(u.z,{color:"primary",density:"compact",flat:"",class:"pl-6 pr-6"},{default:(0,a.k6)((function(){return[(0,a.bF)(w,{to:"/",class:"text-decoration-none"},{default:(0,a.k6)((function(e){var t=e.href,n=e.navigate;return[(0,a.Lk)("h1",{href:t,onClick:n,class:"text-h6 text-white pointer"}," Sorting Hat ",8,v)]})),_:1}),(0,a.bF)(f.h),y.user&&"Login"!==e.$route.name?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.bF)(c.D,{to:"/",flat:"",size:"small",color:"white",class:"mr-2"},{default:(0,a.k6)((function(){return[(0,a.bF)(d.w,{size:"small",start:""},{default:(0,a.k6)((function(){return[(0,a.eW)(" mdi-view-dashboard-variant ")]})),_:1}),(0,a.eW)(" Dashboard ")]})),_:1}),(0,a.bF)(c.D,{to:"/settings",flat:"",size:"small",color:"white",class:"mr-2"},{default:(0,a.k6)((function(){return[(0,a.bF)(d.w,{size:"small",start:""},{default:(0,a.k6)((function(){return[(0,a.eW)(" mdi-cog ")]})),_:1}),(0,a.eW)(" Settings ")]})),_:1}),(0,a.bF)(g.q,{"offset-y":"",left:""},{activator:(0,a.k6)((function(e){var t=e.props;return[(0,a.bF)(c.D,(0,a.v6)(t,{flat:"",size:"small",color:"white"}),{default:(0,a.k6)((function(){return[(0,a.bF)(d.w,{size:"small",start:""},{default:(0,a.k6)((function(){return[(0,a.eW)(" mdi-account-circle ")]})),_:1}),(0,a.eW)(" "+(0,i.v_)(y.user)+" ",1),(0,a.bF)(d.w,{size:"small",end:""},{default:(0,a.k6)((function(){return[(0,a.eW)(" mdi-chevron-down ")]})),_:1})]})),_:2},1040)]})),default:(0,a.k6)((function(){return[(0,a.bF)(p.x,{"bg-color":"primary",dark:"",nav:""},{default:(0,a.k6)((function(){return[(0,a.bF)(m.g,{to:"/change-password"},{prepend:(0,a.k6)((function(){return[(0,a.bF)(d.w,{small:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-form-textbox-password")]})),_:1})]})),default:(0,a.k6)((function(){return[(0,a.bF)(h.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)("Change password")]})),_:1})]})),_:1}),(0,a.bF)(l.G),(0,a.bF)(m.g,{onClick:y.logOut},{prepend:(0,a.k6)((function(){return[(0,a.bF)(d.w,{small:""},{default:(0,a.k6)((function(){return[(0,a.eW)("mdi-logout-variant")]})),_:1})]})),default:(0,a.k6)((function(){return[(0,a.bF)(h.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)("Log out")]})),_:1})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])):(0,a.Q3)("",!0)]})),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((function(e){var t=e.Component;return[(0,a.bF)(o.eB,{name:"fade",mode:"out-in"},{default:(0,a.k6)((function(){return[((0,a.uX)(),(0,a.Wv)((0,a.$y)(t)))]})),_:2},1024)]})),_:1})]})),_:1})}n(44114);var y=n(12215),w=n.n(y);const _={name:"App",computed:{user:function(){return this.$store.state.user}},methods:{logOut:function(){this.$logger.info("Log out user ".concat(this.user)),w().remove("sh_user"),this.$store.commit("loginUser",void 0),this.$router.push("/login")}},watch:{$route:{immediate:!0,handler:function(e){document.title=e.meta.title||"Sorting Hat"}}}};var S=n(64621);const A=(0,S.A)(_,[["render",k]]),E=A;n(15086),n(26099),n(47764),n(62953);var C=n(75220),P=n(14048),F=n(30388),O=(n(16280),n(76918),n(28706),n(25276),n(62062),n(54554),n(60739),n(33110),n(79432),n(27495),n(25440),n(3296),n(27208),n(48408),n(14603),n(47566),n(98721),n(66278)),x=(0,O.y$)({state:{user:w().get("sh_user"),workspace:JSON.parse(localStorage.getItem("sh_workspace"))||[]},mutations:{loginUser:function(e,t){e.user=t},setWorkspace:function(e,t){e.workspace=t}},getters:{isAuthenticated:function(e){return!!e.user},user:function(e){return e.user},workspace:function(e){return e.workspace}},actions:{login:function(e,t){return(0,F.A)((0,P.A)().mark((function n(){var r,o,a,i,s,u,c,l,f;return(0,P.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.username,a=t.password,i=w().get("csrftoken"),s="/api/login/",u="/identities/".replace(/\/$/,""),{NODE_ENV:"production",BASE_URL:"/identities/"}.VUE_APP_API_URL&&(u=new URL({NODE_ENV:"production",BASE_URL:"/identities/"}.VUE_APP_API_URL).origin.replace(/\/$/,"")),c="".concat(u).concat(s),n.next=9,fetch(c,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":i},body:JSON.stringify({username:o,password:a})});case 9:if(l=n.sent,200!==l.status){n.next=16;break}return w().set("sh_user",o,{sameSite:"strict",expires:14}),r("loginUser",o),n.abrupt("return",l);case 16:return n.next=18,l.json();case 18:throw f=n.sent,new Error(f.errors);case 20:case"end":return n.stop()}}),n)})))()},saveWorkspace:function(e,t){var n=e.commit,r=t.map((function(e){return e.uuid}));localStorage.setItem("sh_workspace",JSON.stringify(r)),n("setWorkspace",r)},emptyWorkspace:function(e){var t=e.commit;localStorage.setItem("sh_workspace",JSON.stringify([])),t("setWorkspace",[])},togglePin:function(e,t){var n=e.commit,r=e.state,o=r.workspace.indexOf(t),a=r.workspace;-1===o?a.push(t):a.splice(o,1),n("setWorkspace",a),localStorage.setItem("sh_workspace",JSON.stringify(a))}},modules:{}}),L=[{path:"/",name:"Dashboard",component:function(){return Promise.all([n.e(689),n.e(912),n.e(931),n.e(671)]).then(n.bind(n,90671))},meta:{requiresAuth:!0,title:"Sorting Hat"}},{path:"/individual/:mk",name:"Individual",component:function(){return Promise.all([n.e(689),n.e(912),n.e(193)]).then(n.bind(n,64193))},meta:{requiresAuth:!0,title:"Sorting Hat"}},{path:"/change-password",name:"ChangePassword",component:function(){return n.e(858).then(n.bind(n,44858))},meta:{requiresAuth:!0,title:"Password change - Sorting Hat"}},{path:"/login",name:"Login",component:function(){return n.e(414).then(n.bind(n,87414))},meta:{title:"Log in - Sorting Hat"}},{path:"/search-help",name:"SearchHelp",component:function(){return n.e(544).then(n.bind(n,25544))},meta:{title:"Search Help - Sorting Hat"}},{path:"/organization/:name",name:"Organization",component:function(){return Promise.all([n.e(689),n.e(912),n.e(931),n.e(981)]).then(n.bind(n,58981))},meta:{requiresAuth:!0,title:"Sorting Hat"}},{path:"/settings",name:"Settings",redirect:"/settings/general",component:function(){return n.e(253).then(n.bind(n,67253))},meta:{requiresAuth:!0,title:"Settings - Sorting Hat"},children:[{path:"general",name:"SettingsGeneral",component:function(){return Promise.all([n.e(689),n.e(748)]).then(n.bind(n,41748))}},{path:"sync",name:"SettingsSync",component:function(){return Promise.all([n.e(689),n.e(652)]).then(n.bind(n,27652))}},{path:"jobs",name:"SettingsJobs",component:function(){return Promise.all([n.e(689),n.e(400)]).then(n.bind(n,57400))}}]}],N="/identities/",W=new C.aE({history:(0,C.LA)(N),routes:L});W.beforeEach((function(e,t,n){var r=x.getters.isAuthenticated;e.matched.some((function(e){return e.meta.requiresAuth}))?r?n():n({path:"/login"}):"/login"===e.path&&r?n({path:"/"}):n()}));const j=W;var T=n(58965),U=n(81193),D=n(40197),$=n(73194),V=n(31673),z=n(88039),I=(n(35524),n(19666)),H=n(25430),B=n(53739),R=n(83942);const q=(0,I.$N)({directives:B,components:(0,r.A)({VConfirmEdit:H.Z},R),icons:{defaultSet:"mdi"},theme:{themes:{light:{colors:{primary:"#003756","on-primary":"#ffffff",secondary:"#f4bc00","on-secondary":"#001f25",finished:"#3fa500",failed:"#f41900",background:"#ffffff","on-background":"#001f25","surface-secondary":"#f8fdff","on-surface":"#001f25","surface-variant":"#dee3eb","on-surface-variant":"#42474e"}},variables:{"border-color":"#f8fdff","border-opacity":.12}}},defaults:{VAlert:{variant:"tonal"},VBtn:{variant:"outlined",size:"small"},VCombobox:{variant:"outlined",density:"comfortable"},VDialog:{VBtn:{size:"default"}},VTextField:{variant:"outlined",density:"comfortable"},VSelect:{variant:"outlined",density:"comfortable"}}});var J={install:function(e){function t(e,t){var n;if("debug"!==e){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(n=console)[e].apply(n,[t].concat(o))}}e.config.globalProperties.$logger={error:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,["error",e].concat(r))},debug:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,["debug",e].concat(r))},log:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,["log",e].concat(r))},info:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,["info",e].concat(r))},warn:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,["warn",e].concat(r))}}}};const M=J;n(48598);var X={install:function(e){var t={14:"The individual is already enrolled in the organization on the\n        selected dates.",129:"Invalid credentials. Please check your username and password and\n        try again."};e.config.globalProperties.$getErrorMessage=function(e){return e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.map((function(e){var n=e.extensions.code;return t[n]||e.message})).join(". "):e.networkError?e.networkError.result?e.networkError.result.errors.map((function(e){return e.message})).join(". "):e.networkError.message:e.message}}};const Q=X;var Y=n(74353),G=n.n(Y),K={install:function(e){e.config.globalProperties.$formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm A";if(e)return G()(e).format(t)}}};const Z=K;var ee={NODE_ENV:"production",BASE_URL:"/identities/"}.VUE_APP_API_URL||"".concat("/identities/","api/"),te=(0,U.$)({uri:ee,credentials:"include"}),ne=new D.D({dataIdFromObject:function(e){switch(e.__typename){case"IndividualType":return e.mk;case"IdentityType":return e.uuid;default:return(0,$.or)(e)}}}),re=function(e,t){var n=w().get("csrftoken");return e.setContext((function(e){return(0,r.A)((0,r.A)({},e),{},{headers:(0,r.A)((0,r.A)({},e.headers),{},{"X-CSRFToken":n})})})),t(e)},oe=V.C.from([re,te]),ae=new z.R({link:oe,cache:ne}),ie=new T.f({defaultClient:ae});(0,o.Ef)(E).use(ie).use(Z).use(Q).use(M).use(x).use(j).use(q).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,o,a]=e[l],s=!0,u=0;u<r.length;u++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(s=!1,a<i&&(i=a));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,o,a]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[]))})(),(()=>{n.u=e=>"js/"+e+"."+{193:"f84186ab",253:"61ce8eec",400:"11371f54",414:"13cae85b",544:"b1834368",652:"4c06d511",671:"eac04339",689:"3b834a97",748:"a720a8ac",858:"8246391b",912:"b33cbc3a",931:"1e851b21",981:"f22c0f96"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+e+"."+{193:"1154b3e0",253:"193dbe55",400:"1eb20ef5",652:"6f907ec6",671:"c8c21385",748:"8e0f3bf1",912:"2c598fb9",931:"4db90500",981:"088b7103"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="sortinghat-ui:";n.l=(r,o,a,i)=>{if(e[r])e[r].push(o);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[o];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.p="/identities/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,o,a)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",n.nc&&(i.nonce=n.nc);var s=n=>{if(i.onerror=i.onload=null,"load"===n.type)o();else{var r=n&&n.type,s=n&&n.target&&n.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+s+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=r,u.request=s,i.parentNode&&i.parentNode.removeChild(i),a(u)}};return i.onerror=i.onload=s,i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i),i},t=(e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=n[r],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){o=i[r],a=o.getAttribute("data-href");if(a===e||a===t)return o}},r=r=>new Promise(((o,a)=>{var i=n.miniCssF(r),s=n.p+i;if(t(i,s))return o();e(r,s,null,o,a)})),o={524:0};n.f.miniCss=(e,t)=>{var n={193:1,253:1,400:1,652:1,671:1,748:1,912:1,931:1,981:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=r(e).then((()=>{o[e]=0}),(t=>{throw delete o[e],t})))}}})(),(()=>{var e={524:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=a);var i=n.p+n.u(t),s=new Error,u=r=>{if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};n.l(i,u,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,s,u]=r,c=0;if(i.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(u)var l=u(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},r=self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],(()=>n(22387)));r=n.O(r)})();
//# sourceMappingURL=app.9302ff3f.js.map