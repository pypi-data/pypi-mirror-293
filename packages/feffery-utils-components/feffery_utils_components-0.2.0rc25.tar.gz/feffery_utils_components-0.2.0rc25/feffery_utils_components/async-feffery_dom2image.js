/*! For license information please see async-feffery_dom2image.js.LICENSE.txt */
(window.webpackJsonpfeffery_utils_components=window.webpackJsonpfeffery_utils_components||[]).push([[10],{547:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(1),i=n(8);var l=function(e,t){Object(o.useEffect)((function(){var t=e(),n=!1;return function(){Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:if(r=t,!Object(i.b)(r[Symbol.asyncIterator]))return[3,4];e.label=1;case 1:return[4,t.next()];case 2:return e.sent().done||n?[3,3]:[3,1];case 3:return[3,6];case 4:return[4,t];case 5:e.sent(),e.label=6;case 6:return[2]}var r}))}))}(),function(){n=!0}}),t)},a=n(877),c=n(221);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,l=Object.create(i.prototype),a=new L(r||[]);return o(l,"_invoke",{value:T(e,n,a)}),l}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m="suspendedStart",g="executing",p="completed",y={};function w(){}function v(){}function b(){}var S={};d(S,l,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(O([])));x&&x!==n&&r.call(x,l)&&(S=x);var A=b.prototype=w.prototype=Object.create(S);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(o,i,l,a){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,a)}),(function(e){n("throw",e,l,a)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function T(t,n,r){var o=m;return function(i,l){if(o===g)throw Error("Generator is already running");if(o===p){if("throw"===i)throw l;return{value:e,done:!0}}for(r.method=i,r.arg=l;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var s=h(t,n,r);if("normal"===s.type){if(o=r.done?p:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=p,r.method="throw",r.arg=s.arg)}}}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var l=i.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return v.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=d(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,d(e,c,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},C(N.prototype),d(N.prototype,a,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var l=new N(f(e,n,r,o),i);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},C(A),d(A,c,"Generator"),d(A,l,(function(){return this})),d(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],a=l.completion;if("root"===l.tryLoc)return o("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),s=r.call(l,"finallyLoc");if(c&&s){if(this.prev<l.catchLoc)return o(l.catchLoc,!0);if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return o(l.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return o(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var l=i?i.completion:{};return l.type=e,l.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function d(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){d(i,r,o,l,a,"next",e)}function a(e){d(i,r,o,l,a,"throw",e)}l(void 0)}))}}var h=function(e){var t=e.targetSelector,n=e.scale,r=e.setProps;e.loading_state;return l(f(u().mark((function e(){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((o=document.querySelector(t))?Object(a.domToPng)(o,{scale:n}).then((function(e){r({screenshotResult:{selector:t,status:"success",dataUrl:e,timestamp:(new Date).getTime()}})})):r({screenshotResult:{selector:t,status:"failed",dataUrl:null,timestamp:(new Date).getTime()}}),r({targetSelector:null}));case 1:case"end":return e.stop()}}),e)}))),[t]),React.createElement(React.Fragment,null)};t.default=h;h.defaultProps=c.b,h.propTypes=c.c},877:function(e,t,n){!function(e){var t,n=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,c=Math.pow,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&s(e,n,t[n]);if(i)for(var n of i(t))a.call(t,n)&&s(e,n,t[n]);return e},d=(e,t)=>r(e,o(t)),f=(e,t,n)=>new Promise((r,o)=>{var i=e=>{try{a(n.next(e))}catch(e){o(e)}},l=e=>{try{a(n.throw(e))}catch(e){o(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,l);a((n=n.apply(e,t)).next())});function h(e,t){return e[13]=1,e[14]=t>>8,e[15]=255&t,e[16]=t>>8,e[17]=255&t,e}const m="p".charCodeAt(0),g="H".charCodeAt(0),p="Y".charCodeAt(0),y="s".charCodeAt(0);let w;function v(e){let t=-1;w||(w=function(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}());for(let n=0;n<e.length;n++)t=w[255&(t^e[n])]^t>>>8;return-1^t}function b(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=m,r[1]=g,r[2]=p,r[3]=y,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=255&t,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=v(r),i=new Uint8Array(4);if(i[0]=o>>>24,i[1]=o>>>16,i[2]=o>>>8,i[3]=255&o,n){const t=function(e){for(let t=e.length-1;t>=4;t--)if(9===e[t-4]&&e[t-3]===m&&e[t-2]===g&&e[t-1]===p&&e[t]===y)return t-3;return 0}(e);return e.set(r,t),e.set(i,t+13),e}{const t=new Uint8Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=9;const n=new Uint8Array(54);return n.set(e,0),n.set(t,33),n.set(r,37),n.set(i,50),n}}const S="[modern-screenshot]",E="undefined"!=typeof window,x=E&&"Worker"in window,A=E&&"atob"in window,C=E&&"btoa"in window,N=E?null==(t=window.navigator)?void 0:t.userAgent:"",T=N.includes("Chrome"),k=N.includes("AppleWebKit")&&!T,D=N.includes("Firefox"),P=e=>1===e.nodeType,L=e=>"object"==typeof e.className,O=e=>"image"===e.tagName,_=e=>P(e)&&void 0!==e.style&&!L(e),F=e=>8===e.nodeType,j=e=>"IMG"===e.tagName,I=e=>"VIDEO"===e.tagName,R=e=>"TEXTAREA"===e.tagName,U=e=>"SLOT"===e.tagName,M=(...e)=>console.warn(S,...e),B=e=>{var t;const n=null==(t=null==e?void 0:e.createElement)?void 0:t.call(e,"canvas");return n&&(n.height=n.width=1),n&&"toDataURL"in n&&Boolean(n.toDataURL("image/webp").includes("image/webp"))},$=e=>e.startsWith("data:");function W(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(E&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!E)return e;const n=q().implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}function q(e){var t;return null!=(t=e&&P(e)?null==e?void 0:e.ownerDocument:e)?t:window.document}const V="http://www.w3.org/2000/svg";function z(e,t,n){const r=q(n).createElementNS(V,"svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}function G(e,t){let n=(new XMLSerializer).serializeToString(e);return t&&(n=n.replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(n)}function H(e,t="image/png",n=1){return f(this,null,(function*(){try{return yield new Promise((r,o)=>{e.toBlob(e=>{e?r(e):o(new Error("Blob is null"))},t,n)})}catch(r){if(A)return M("Failed canvas to blob",{type:t,quality:n},r),function(e){var t,n;const[r,o]=e.split(","),i=null!=(n=null==(t=r.match(/data:(.+);/))?void 0:t[1])?n:void 0,l=window.atob(o),a=l.length,c=new Uint8Array(a);for(let e=0;e<a;e+=1)c[e]=l.charCodeAt(e);return new Blob([c],{type:i})}(e.toDataURL(t,n));throw r}}))}function X(e,t){return new Promise((n,r)=>{const o=new FileReader;o.onload=()=>n(o.result),o.onerror=()=>r(o.error),o.onabort=()=>r(new Error("Failed read blob to "+t)),"dataUrl"===t?o.readAsDataURL(e):"arrayBuffer"===t&&o.readAsArrayBuffer(e)})}const Y=e=>X(e,"dataUrl");function J(e,t){const n=q(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function K(e,t){return new Promise(n=>{const{timeout:r,ownerDocument:o,onError:i}=null!=t?t:{},l="string"==typeof e?J(e,q(o)):e;let a=null,c=null;function s(){n(l),a&&clearTimeout(a),null==c||c()}if(r&&(a=setTimeout(s,r)),I(l)){const e=l.currentSrc||l.src;if(!e)return l.poster?K(l.poster,t).then(n):s();if(l.readyState>=2)return s();const r=s,o=t=>{M("Failed video load",e,t),null==i||i(t),s()};c=()=>{l.removeEventListener("loadeddata",r),l.removeEventListener("error",o)},l.addEventListener("loadeddata",r,{once:!0}),l.addEventListener("error",o,{once:!0})}else{const e=O(l)?l.href.baseVal:l.currentSrc||l.src;if(!e)return s();const t=()=>f(this,null,(function*(){if(j(l)&&"decode"in l)try{yield l.decode()}catch(t){M("Failed to decode image, trying to render anyway",l.dataset.originalSrc||e,t)}s()})),n=t=>{M("Failed image load",l.dataset.originalSrc||e,t),s()};if(j(l)&&l.complete)return t();c=()=>{l.removeEventListener("load",t),l.removeEventListener("error",n)},l.addEventListener("load",t,{once:!0}),l.addEventListener("error",n,{once:!0})}})}function Q(e,t){return f(this,null,(function*(){_(e)&&(j(e)||I(e)?yield K(e,{timeout:t}):yield Promise.all(["img","video"].flatMap(n=>Array.from(e.querySelectorAll(n)).map(e=>K(e,{timeout:t})))))}))}const Z=function(){let e=0;return()=>(e+=1,`u${("0000"+(Math.random()*c(36,4)<<0).toString(36)).slice(-4)}${e}`)}();function ee(e){return null==e?void 0:e.split(",").map(e=>e.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}function te(e){return{time:t=>e&&(e=>console.time(`${S} ${e}`))(t),timeEnd:t=>e&&(e=>console.timeEnd(`${S} ${e}`))(t),warn:(...t)=>e&&M(...t)}}function ne(e){return{cache:e?"no-cache":"force-cache"}}function re(e,t){return f(this,null,(function*(){return(e=>e&&"__CONTEXT__"in e)(e)?e:oe(e,d(u({},t),{autoDestruct:!0}))}))}function oe(e,t){return f(this,null,(function*(){var n,r,o,i,l;const{scale:a=1,workerUrl:c,workerNumber:s=1}=t||{},h=Boolean(null==t?void 0:t.debug),m=null==(n=null==t?void 0:t.features)||n,g=null!=(r=e.ownerDocument)?r:E?window.document:void 0,p=null!=(i=null==(o=e.ownerDocument)?void 0:o.defaultView)?i:E?window:void 0,y=new Map,w=d(u({width:0,height:0,quality:1,type:"image/png",scale:a,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:h,fetch:u({requestInit:ne(null==(l=null==t?void 0:t.fetch)?void 0:l.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},null==t?void 0:t.fetch),fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:s,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1},t),{__CONTEXT__:!0,log:te(h),node:e,ownerDocument:g,ownerWindow:p,dpi:1===a?null:96*a,svgStyleElement:ie(g),svgDefsElement:null==g?void 0:g.createElementNS(V,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...new Array(x&&c&&s?s:0)].map(()=>{try{const e=new Worker(c);return e.onmessage=e=>f(this,null,(function*(){var t,n,r,o;const{url:i,result:l}=e.data;l?null==(n=null==(t=y.get(i))?void 0:t.resolve)||n.call(t,l):null==(o=null==(r=y.get(i))?void 0:r.reject)||o.call(r,new Error("Error receiving message from worker: "+i))})),e.onmessageerror=e=>{var t,n;const{url:r}=e.data;null==(n=null==(t=y.get(r))?void 0:t.reject)||n.call(t,new Error("Error receiving message from worker: "+r))},e}catch(e){return M("Failed to new Worker",e),null}}).filter(Boolean),fontFamilies:new Set,fontCssTexts:new Map,acceptOfImage:[B(g)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")+";q=0.8",requests:y,drawImageCount:0,tasks:[],features:m,isEnable:e=>{var t,n;return"restoreScrollPosition"===e?"boolean"!=typeof m&&null!=(t=m[e])&&t:"boolean"==typeof m?m:null==(n=m[e])||n}});w.log.time("wait until load"),yield Q(e,w.timeout),w.log.timeEnd("wait until load");const{width:v,height:b}=function(e,t){let{width:n,height:r}=t;if(P(e)&&(!n||!r)){const t=e.getBoundingClientRect();n=n||t.width||Number(e.getAttribute("width"))||0,r=r||t.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}(e,w);return w.width=v,w.height=b,w}))}function ie(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode("\n.______background-clip--text {\n  background-clip: text;\n  -webkit-background-clip: text;\n}\n");return t.appendChild(n),t}function le(e,t){return f(this,null,(function*(){const{log:n,timeout:r,drawImageCount:o,drawImageInterval:i}=t;n.time("image to canvas");const l=yield K(e,{timeout:r}),{canvas:a,context2d:c}=function(e,t){const{width:n,height:r,scale:o,backgroundColor:i,maximumCanvasSize:l}=t,a=e.createElement("canvas");a.width=Math.floor(n*o),a.height=Math.floor(r*o),a.style.width=n+"px",a.style.height=r+"px",l&&(a.width>l||a.height>l)&&(a.width>l&&a.height>l?a.width>a.height?(a.height*=l/a.width,a.width=l):(a.width*=l/a.height,a.height=l):a.width>l?(a.height*=l/a.width,a.width=l):(a.width*=l/a.height,a.height=l));const c=a.getContext("2d");return c&&i&&(c.fillStyle=i,c.fillRect(0,0,a.width,a.height)),{canvas:a,context2d:c}}(e.ownerDocument,t),s=()=>{try{null==c||c.drawImage(l,0,0,a.width,a.height)}catch(e){M("Failed to drawImage",e)}};if(s(),t.isEnable("fixSvgXmlDecode"))for(let e=0;e<o;e++)yield new Promise(t=>{setTimeout(()=>{s(),t()},e+i)});return t.drawImageCount=0,n.timeEnd("image to canvas"),a}))}const ae=["width","height","-webkit-text-fill-color"],ce=["stroke","fill"];function se(e,t,n){var r;const{defaultComputedStyles:o,ownerDocument:i}=n,l=e.nodeName.toLowerCase(),a=L(e)&&"svg"!==l,c=a?ce.map(t=>[t,e.getAttribute(t)]).filter(([,e])=>null!==e):[],s=[a&&"svg",l,c.map((e,t)=>`${e}=${t}`).join(","),t].filter(Boolean).join(":");if(o.has(s))return o.get(s);let u=n.sandbox;if(!u)try{i&&(u=i.createElement("iframe"),u.id="__SANDBOX__-"+Z(),u.width="0",u.height="0",u.style.visibility="hidden",u.style.position="fixed",i.body.appendChild(u),null==(r=u.contentWindow)||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),n.sandbox=u)}catch(e){M("Failed to create iframe sandbox",e)}if(!u)return new Map;const d=u.contentWindow;if(!d)return new Map;const f=d.document;let h,m;a?(h=f.createElementNS(V,"svg"),m=h.ownerDocument.createElementNS(h.namespaceURI,l),c.forEach(([e,t])=>{m.setAttributeNS(null,e,t)}),h.appendChild(m)):h=m=f.createElement(l),m.textContent=" ",f.body.appendChild(h);const g=d.getComputedStyle(m,t),p=new Map;for(let e=g.length,t=0;t<e;t++){const e=g.item(t);ae.includes(e)||p.set(e,g.getPropertyValue(e))}return f.body.removeChild(h),o.set(s,p),p}function ue(e,t,n){var r;const o=new Map,i=[],l=new Map;if(n)for(const e of n)a(e);else for(let t=e.length,n=0;n<t;n++)a(e.item(n));for(let e=i.length,t=0;t<e;t++)null==(r=l.get(i[t]))||r.forEach((e,t)=>o.set(t,e));function a(n){const r=e.getPropertyValue(n),a=e.getPropertyPriority(n),c=n.lastIndexOf("-"),s=c>-1?n.substring(0,c):void 0;if(s){let e=l.get(s);e||(e=new Map,l.set(s,e)),e.set(n,[r,a])}t.get(n)===r&&!a||(s?i.push(s):o.set(n,[r,a]))}return o}const de=[":before",":after"],fe=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function he(e){if(e.ownerDocument)try{const t=e.toDataURL();if("data:,"!==t)return J(t,e.ownerDocument)}catch(e){}const t=e.cloneNode(!1),n=e.getContext("2d"),r=t.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(e){M("Failed to clone canvas",e)}return t}function me(e,t){return(e=>"CANVAS"===e.tagName)(e)?he(e):(e=>"IFRAME"===e.tagName)(e)?function(e,t){var n;try{if(null!=(n=null==e?void 0:e.contentDocument)&&n.body)return ve(e.contentDocument.body,t)}catch(e){M("Failed to clone iframe",e)}return e.cloneNode(!1)}(e,t):j(e)?function(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager"),t}(e):I(e)?function(e){return f(this,null,(function*(){if(e.ownerDocument&&!e.currentSrc&&e.poster)return J(e.poster,e.ownerDocument);const t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);const n=t.ownerDocument;if(n){let r=!0;if(yield K(t,{onError:()=>r=!1}),!r)return e.poster?J(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,yield new Promise(e=>{t.addEventListener("seeked",e,{once:!0})});const o=n.createElement("canvas");o.width=e.offsetWidth,o.height=e.offsetHeight;try{const e=o.getContext("2d");e&&e.drawImage(t,0,0,o.width,o.height)}catch(n){return M("Failed to clone video",n),e.poster?J(e.poster,e.ownerDocument):t}return he(o)}return t}))}(e):e.cloneNode(!1)}const ge=new Set(["symbol"]);function pe(e,t,n,r){return f(this,null,(function*(){if(P(n)&&((e=>"STYLE"===e.tagName)(n)||(e=>"SCRIPT"===e.tagName)(n))||r.filter&&!r.filter(n))return;ge.has(t.nodeName)||ge.has(n.nodeName)?r.currentParentNodeStyle=void 0:r.currentParentNodeStyle=r.currentNodeStyle;const o=yield ve(n,r);r.isEnable("restoreScrollPosition")&&function(e,t){if(!_(e)||!_(t))return;const{scrollTop:n,scrollLeft:r}=e;if(!n&&!r)return;const{transform:o}=t.style,i=new DOMMatrix(o),{a:l,b:a,c:c,d:s}=i;i.a=1,i.b=0,i.c=0,i.d=1,i.translateSelf(-r,-n),i.a=l,i.b=a,i.c=c,i.d=s,t.style.transform=i.toString()}(e,o),t.appendChild(o)}))}function ye(e,t,n){return f(this,null,(function*(){var r,o;for(let i=null!=(o=P(e)?null==(r=e.shadowRoot)?void 0:r.firstChild:void 0)?o:e.firstChild;i;i=i.nextSibling)if(!F(i))if(P(i)&&U(i)&&"function"==typeof i.assignedNodes){const r=i.assignedNodes();for(let o=0;o<r.length;o++)yield pe(e,t,r[o],n)}else yield pe(e,t,i,n)}))}const we=/^[\w-:]+$/;function ve(e,t,n=!1){return f(this,null,(function*(){var r,o,i,l;const{ownerDocument:a,ownerWindow:c,fontFamilies:s}=t;if(a&&(e=>3===e.nodeType)(e))return a.createTextNode(e.data);if(a&&c&&P(e)&&(_(e)||L(e))){const a=yield me(e,t);if(t.isEnable("removeAbnormalAttributes")){const e=a.getAttributeNames();for(let t=e.length,n=0;n<t;n++){const t=e[n];we.test(t)||a.removeAttribute(t)}}const c=t.currentNodeStyle=function(e,t,n,r){var o,i,l,a;const{ownerWindow:c,includeStyleProperties:s,currentParentNodeStyle:u}=r,d=t.style,f=c.getComputedStyle(e),h=se(e,null,r);null==u||u.forEach((e,t)=>{h.delete(t)});const m=ue(f,h,s);return m.delete("transition-property"),m.delete("all"),m.delete("d"),m.delete("content"),n&&(m.delete("margin-top"),m.delete("margin-right"),m.delete("margin-bottom"),m.delete("margin-left"),m.delete("margin-block-start"),m.delete("margin-block-end"),m.delete("margin-inline-start"),m.delete("margin-inline-end"),m.set("box-sizing",["border-box",""])),"text"===(null==(o=m.get("background-clip"))?void 0:o[0])&&t.classList.add("______background-clip--text"),T&&(m.has("font-kerning")||m.set("font-kerning",["normal",""]),("hidden"===(null==(i=m.get("overflow-x"))?void 0:i[0])||"hidden"===(null==(l=m.get("overflow-y"))?void 0:l[0]))&&"ellipsis"===(null==(a=m.get("text-overflow"))?void 0:a[0])&&e.scrollWidth===e.clientWidth&&m.set("text-overflow",["clip",""])),m.forEach(([e,t],n)=>{d.setProperty(n,e,t)}),m}(e,a,n,t);n&&function(e,t){const{backgroundColor:n,width:r,height:o,style:i}=t,l=e.style;if(n&&l.setProperty("background-color",n,"important"),r&&l.setProperty("width",r+"px","important"),o&&l.setProperty("height",o+"px","important"),i)for(const e in i)l[e]=i[e]}(a,t);let u=!1;if(t.isEnable("copyScrollbar")){const t=[null==(r=c.get("overflow-x"))?void 0:r[0],null==(o=c.get("overflow-y"))?void 0:o[1]];u=t.includes("scroll")||(t.includes("auto")||t.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}return function(e,t,n,r){const{ownerWindow:o,svgStyleElement:i,svgStyles:l,currentNodeStyle:a}=r;function c(n){var i;const c=o.getComputedStyle(e,n);let s=c.getPropertyValue("content");if(!s||"none"===s)return;s=s.replace(/(')|(")|(counter\(.+\))/g,"");const u=[Z()],d=se(e,n,r);null==a||a.forEach((e,t)=>{d.delete(t)});const f=ue(c,d,r.includeStyleProperties);f.delete("content"),f.delete("-webkit-locale"),"text"===(null==(i=f.get("background-clip"))?void 0:i[0])&&t.classList.add("______background-clip--text");const h=[`content: '${s}';`];if(f.forEach(([e,t],n)=>{h.push(`${n}: ${e}${t?" !important":""};`)}),1===h.length)return;try{t.className=[t.className,...u].join(" ")}catch(e){return}const m=h.join("\n  ");let g=l.get(m);g||(g=[],l.set(m,g)),g.push(`.${u[0]}:${n}`)}i&&o&&(de.forEach(c),n&&fe.forEach(c))}(e,a,u,t),function(e,t){R(e)&&(t.innerHTML=e.value),(R(e)||(e=>"INPUT"===e.tagName)(e)||(e=>"SELECT"===e.tagName)(e))&&t.setAttribute("value",e.value)}(e,a),null==(l=ee(null==(i=c.get("font-family"))?void 0:i[0]))||l.forEach(e=>s.add(e)),I(e)||(yield ye(e,a,t)),a}const u=e.cloneNode(!1);return yield ye(e,u,t),u}))}function be(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(e){}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}function Se(e){const t=e,{url:n,timeout:r,responseType:o}=t,c=((e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&i)for(var r of i(e))t.indexOf(r)<0&&a.call(e,r)&&(n[r]=e[r]);return n})(t,["url","timeout","responseType"]),s=new AbortController,d=r?setTimeout(()=>s.abort(),r):void 0;return fetch(n,u({signal:s.signal},c)).then(e=>{if(!e.ok)throw new Error("Failed fetch, not 2xx response",{cause:e});switch(o){case"dataUrl":return e.blob().then(Y);case"text":default:return e.text()}}).finally(()=>clearTimeout(d))}function Ee(e,t){const{url:n,requestType:r="text",responseType:o="text",imageDom:i}=t;let l=n;const{timeout:a,acceptOfImage:c,requests:s,fetchFn:d,fetch:{requestInit:h,bypassingCache:m,placeholderImage:g},workers:p}=e;"image"===r&&(k||D)&&e.drawImageCount++;let y=s.get(n);if(!y){m&&m instanceof RegExp&&m.test(l)&&(l+=(/\?/.test(l)?"&":"?")+(new Date).getTime());const e=u({url:l,timeout:a,responseType:o,headers:"image"===r?{accept:c}:void 0},h);y={type:r,resolve:void 0,reject:void 0,response:null},y.response=(()=>f(this,null,(function*(){if(d&&"image"===r){const e=yield d(n);if(e)return e}return!k&&n.startsWith("http")&&p.length?new Promise((t,r)=>{p[s.size&p.length-1].postMessage(u({rawUrl:n},e)),y.resolve=t,y.reject=r}):Se(e)})))().catch(e=>{if(s.delete(n),"image"===r&&g)return M("Failed to fetch image base64, trying to use placeholder image",l),"string"==typeof g?g:g(i);throw e}),s.set(n,y)}return y.response}function xe(e,t,n,r){return f(this,null,(function*(){if(!Ae(e))return e;for(const[o,i]of function(e,t){const n=[];return e.replace(Ce,(e,r,o)=>(n.push([o,W(o,t)]),e)),n.filter(([e])=>!$(e))}(e,t))try{const t=yield Ee(n,{url:i,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(Ne(o),`$1${t}$3`)}catch(e){M("Failed to fetch css data url",o,e)}return e}))}function Ae(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const Ce=/url\((['"]?)([^'"]+?)\1\)/g;function Ne(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Te(e,t){return f(this,null,(function*(){const{ownerDocument:e,svgStyleElement:n,fontFamilies:r,fontCssTexts:o,tasks:i,font:l}=t;if(e&&n&&r.size)if(l&&l.cssText){const r=Oe(l.cssText,t);n.appendChild(e.createTextNode(r+"\n"))}else{const l=Array.from(e.styleSheets).filter(e=>{try{return"cssRules"in e&&Boolean(e.cssRules.length)}catch(t){return M("Error while reading CSS rules from "+e.href,t),!1}});yield Promise.all(l.flatMap(e=>Array.from(e.cssRules).map((n,r)=>f(this,null,(function*(){if((e=>"CSSImportRule"===e.constructor.name)(n)){let o=r+1;const i=n.href;let l="";try{l=yield Ee(t,{url:i,requestType:"text",responseType:"text"})}catch(e){M("Error fetch remote css import from "+i,e)}const a=l.replace(Ce,(e,t,n)=>e.replace(n,W(n,i)));for(const t of function(e){if(null==e)return[];const t=[];let n=e.replace(ke,"");for(;;){const e=De.exec(n);if(!e)break;t.push(e[0])}n=n.replace(De,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(e)o.lastIndex=r.lastIndex;else{if(e=o.exec(n),!e)break;r.lastIndex=o.lastIndex}t.push(e[0])}return t}(a))try{e.insertRule(t,t.startsWith("@import")?o+=1:e.cssRules.length)}catch(e){M("Error inserting rule from remote css import",{rule:t,error:e})}}}))))),l.flatMap(e=>Array.from(e.cssRules)).filter(e=>{var t;return(e=>"CSSFontFaceRule"===e.constructor.name)(e)&&Ae(e.style.getPropertyValue("src"))&&(null==(t=ee(e.style.getPropertyValue("font-family")))?void 0:t.some(e=>r.has(e)))}).forEach(r=>{const l=r,a=o.get(l.cssText);a?n.appendChild(e.createTextNode(a+"\n")):i.push(xe(l.cssText,l.parentStyleSheet?l.parentStyleSheet.href:null,t).then(r=>{r=Oe(r,t),o.set(l.cssText,r),n.appendChild(e.createTextNode(r+"\n"))}))})}}))}const ke=/(\/\*[\s\S]*?\*\/)/gi,De=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi,Pe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Le=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Oe(e,t){const{font:n}=t,r=n?null==n?void 0:n.preferredFormat:void 0;return r?e.replace(Le,e=>{for(;;){const[t,,n]=Pe.exec(e)||[];if(!n)return"";if(n===r)return`src: ${t};`}}):e}const _e=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Fe(e,t){const{tasks:n}=t;P(e)&&((j(e)||O(e))&&n.push(...function(e,t){if(j(e)){const n=e.currentSrc||e.src;if(!$(n))return[Ee(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(t=>{t&&(e.srcset="",e.dataset.originalSrc=n,e.src=t||"")})];(k||D)&&t.drawImageCount++}else if(L(e)&&!$(e.href.baseVal)){const n=e.href.baseVal;return[Ee(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(t=>{t&&(e.dataset.originalSrc=n,e.href.baseVal=t||"")})]}return[]}(e,t)),(e=>"use"===e.tagName)(e)&&n.push(...function(e,t){var n;const{ownerDocument:r,svgDefsElement:o}=t,i=null!=(n=e.getAttribute("href"))?n:e.getAttribute("xlink:href");if(!i)return[];const[l,a]=i.split("#");if(a){const n="#"+a,i=null==r?void 0:r.querySelector("svg "+n);if(l&&e.setAttribute("href",n),null!=o&&o.querySelector(n))return[];if(i)return null==o||o.appendChild(i.cloneNode(!0)),[];if(l)return[Ee(t,{url:l,responseType:"text"}).then(e=>{null==o||o.insertAdjacentHTML("beforeend",e)})]}return[]}(e,t))),_(e)&&n.push(...function(e,t){return _e.map(n=>{const r=e.getPropertyValue(n);return r&&"none"!==r?((k||D)&&t.drawImageCount++,xe(r,null,t,!0).then(t=>{!t||r===t||e.setProperty(n,t,e.getPropertyPriority(n))})):null}).filter(Boolean)}(e.style,t)),e.childNodes.forEach(e=>{Fe(e,t)})}function je(e,t){return f(this,null,(function*(){const n=yield re(e,t);if(P(n.node)&&L(n.node))return n.node;const{ownerDocument:r,log:o,tasks:i,svgStyleElement:l,svgDefsElement:a,svgStyles:c,font:s,progress:u,autoDestruct:d,onCloneNode:h,onEmbedNode:m,onCreateForeignObjectSvg:g}=n;o.time("clone node");const p=yield ve(n.node,n,!0);if(l&&r){let e="";c.forEach((t,n)=>{e+=`${t.join(",\n")} {\n  ${n}\n}\n`}),l.appendChild(r.createTextNode(e))}o.timeEnd("clone node"),null==h||h(p),!1!==s&&P(p)&&(o.time("embed web font"),yield Te(0,n),o.timeEnd("embed web font")),o.time("embed node"),Fe(p,n);const y=i.length;let w=0;null==u||u(w,y),yield Promise.all([...Array(4)].map(()=>f(this,null,(function*(){for(;;){const e=i.pop();if(!e)break;try{yield e}catch(e){M("Failed to run task",e)}null==u||u(++w,y)}})))),o.timeEnd("embed node"),null==m||m(p);const v=function(e,t){const{width:n,height:r}=t,o=z(n,r,e.ownerDocument),i=o.ownerDocument.createElementNS(o.namespaceURI,"foreignObject");return i.setAttributeNS(null,"x","0%"),i.setAttributeNS(null,"y","0%"),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.append(e),o.appendChild(i),o}(p,n);return a&&v.insertBefore(a,v.children[0]),l&&v.insertBefore(l,v.children[0]),d&&be(n),null==g||g(v),v}))}function Ie(e,t){return f(this,null,(function*(){var n;const r=yield re(e,t),o=yield je(r),i=G(o,r.isEnable("removeControlCharacter"));r.autoDestruct||(r.svgStyleElement=ie(r.ownerDocument),r.svgDefsElement=null==(n=r.ownerDocument)?void 0:n.createElementNS(V,"defs"),r.svgStyles.clear());const l=J(i,o.ownerDocument);return yield le(l,r)}))}function Re(e,t){return f(this,null,(function*(){const n=yield re(e,t),{log:r,quality:o,type:i,dpi:l}=n,a=yield Ie(n);r.time("canvas to data url");let c=a.toDataURL(i,o);if(["image/png","image/jpeg"].includes(i)&&l&&A&&C){const[e,t]=c.split(",");let n=0,r=!1;if("image/png"===i){const e=function(e){let t=e.indexOf("AAlwSFlz");return-1===t&&(t=e.indexOf("AAAJcEhZ")),-1===t&&(t=e.indexOf("AAAACXBI")),t}(t);e>=0?(n=4*Math.ceil((e+28)/3),r=!0):n=44}else"image/jpeg"===i&&(n=24);const o=t.substring(0,n),a=t.substring(n),s=window.atob(o),u=new Uint8Array(s.length);for(let e=0;e<u.length;e++)u[e]=s.charCodeAt(e);const d="image/png"===i?b(u,l,r):h(u,l);c=[e,",",window.btoa(String.fromCharCode(...d)),a].join("")}return r.timeEnd("canvas to data url"),c}))}function Ue(e,t){return f(this,null,(function*(){const n=yield re(e,t),{width:r,height:o,ownerDocument:i}=n,l=yield Re(n),a=z(r,o,i),c=a.ownerDocument.createElementNS(a.namespaceURI,"image");return c.setAttributeNS(null,"href",l),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"width","100%"),a.appendChild(c),G(a,n.isEnable("removeControlCharacter"))}))}e.createContext=oe,e.destroyContext=be,e.domToBlob=function(e,t){return f(this,null,(function*(){const n=yield re(e,t),{log:r,type:o,quality:i,dpi:l}=n,a=yield Ie(n);r.time("canvas to blob");const c=yield H(a,o,i);if(["image/png","image/jpeg"].includes(o)&&l){const e=yield(e=>X(e,"arrayBuffer"))(c.slice(0,33));let t=new Uint8Array(e);return"image/png"===o?t=b(t,l):"image/jpeg"===o&&(t=h(t,l)),r.timeEnd("canvas to blob"),new Blob([t,c.slice(33)],{type:o})}return r.timeEnd("canvas to blob"),c}))},e.domToCanvas=Ie,e.domToDataUrl=Re,e.domToForeignObjectSvg=je,e.domToImage=function(e,t){return f(this,null,(function*(){const n=yield re(e,t),{ownerDocument:r,width:o,height:i,scale:l,type:a}=n,c=J("image/svg+xml"===a?yield Ue(n):yield Re(n),r);return c.width=Math.floor(o*l),c.height=Math.floor(i*l),c.style.width=o+"px",c.style.height=i+"px",c}))},e.domToJpeg=function(e,t){return f(this,null,(function*(){return Re(yield re(e,d(u({},t),{type:"image/jpeg"})))}))},e.domToPixel=function(e,t){return f(this,null,(function*(){const n=yield re(e,t),r=yield Ie(n);return r.getContext("2d").getImageData(0,0,r.width,r.height).data}))},e.domToPng=function(e,t){return f(this,null,(function*(){return Re(yield re(e,d(u({},t),{type:"image/png"})))}))},e.domToSvg=Ue,e.domToWebp=function(e,t){return f(this,null,(function*(){return Re(yield re(e,d(u({},t),{type:"image/webp"})))}))},e.loadMedia=K,e.waitUntilLoad=Q,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(t)}}]);
//# sourceMappingURL=async-feffery_dom2image.js.map
//# sourceMappingURL=async-feffery_dom2image.js.map