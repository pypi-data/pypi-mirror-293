import{A as q}from"./api.854a5e4c.js";import{P as Fe}from"./PlayerNavbar.56197f01.js";import{b as Ae,u as Te}from"./workspaceStore.411ef1fe.js";import{B as Me}from"./BaseLayout.294a6887.js";import{R as Ie,S as Re,E as Ue,a as Ee,I as Ve,L as Le}from"./SourceCode.db5c4074.js";import{S as Be}from"./SaveButton.6d0d3fb7.js";import{F as $,a as Ne,b as $e,c as He,d as De,r as Pe}from"./FormRunner.7499affa.js";import{d as B,B as H,f as U,o as d,X as F,Z as We,R as w,eb as Ze,a as T,W as ze,D as Oe,c as b,w as t,b as a,u as e,cK as re,$ as W,e as S,db as N,aF as v,cV as ne,d7 as L,cy as C,bK as A,cx as se,aR as ue,el as ie,em as de,bN as le,bS as I,ee as je,df as P,eq as Qe,ed as qe,aK as Ke,g as oe,L as Ge,N as Je,ej as Xe,y as Ye,ec as j,bx as ea,cN as aa,d8 as ta,aV as D,eS as la}from"./vue-router.3fd92176.js";import{a as oa}from"./asyncComputed.295e9e03.js";import{W as ra}from"./PlayerConfigProvider.44427467.js";import{F as na}from"./PhArrowSquareOut.vue.188b81dc.js";import{G as sa}from"./PhFlowArrow.vue.d1d247ee.js";import{F as ua}from"./metadata.789df59c.js";import{F as ia}from"./forms.665a9dac.js";import"./editor.519c2dc1.js";import{W as K}from"./workspaces.b456ec6a.js";import{T as da}from"./ThreadSelector.23af8b2c.js";import{A as pa}from"./index.4fbbd10e.js";import{A as ca}from"./index.063f7c9e.js";import{N as ma}from"./NavbarControls.a8a61aa1.js";import{b as va}from"./index.5ccdbcb7.js";import{A as Q,T as fa}from"./TabPane.d0ca7ad5.js";import{B as ga}from"./Badge.bcc65740.js";import{A as ha}from"./index.c6ce1c1c.js";import{C as ya}from"./Card.0ce127d8.js";import"./fetch.8c5b12c2.js";import"./PhSignOut.vue.154299d7.js";import"./index.66903cf4.js";import"./Avatar.2107fa31.js";import"./url.5959ae47.js";import"./colorHelpers.f04087b3.js";import"./uuid.06ef1e24.js";import"./scripts.32887e06.js";import"./record.cbb43e89.js";import"./validations.0afef3f1.js";import"./string.e75a34fd.js";import"./PhCopy.vue.0ae3f8ab.js";import"./PhCheckCircle.vue.d8163a77.js";import"./PhCopySimple.vue.992b99ff.js";import"./PhCaretRight.vue.f72488ac.js";import"./PhBug.vue.00bc4255.js";import"./PhQuestion.vue.129febdc.js";import"./LoadingOutlined.dad6ee6e.js";import"./polling.4e30c061.js";import"./PhPencil.vue.a2604470.js";import"./toggleHighContrast.db48a34e.js";import"./UnsavedChangesHandler.9562b93c.js";import"./ExclamationCircleOutlined.379cd3ee.js";import"./Login.vue_vue_type_script_setup_true_lang.8de09e2d.js";import"./CircularLoading.b920c29a.js";import"./PhArrowClockwise.vue.2725755a.js";import"./Steps.767c106d.js";import"./Watermark.43182479.js";import"./index.bd967757.js";import"./PhKanban.vue.b52985f0.js";import"./PhWebhooksLogo.vue.73a10b16.js";import"./index.61e7dffa.js";import"./CloseCircleOutlined.f8dfd09a.js";import"./popupNotifcation.0e86d6a8.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.69b9fa5f.js";import"./BookOutlined.5f7ad9dc.js";import"./PhChats.vue.aa1113d9.js";import"./isNumeric.75337b1e.js";(function(){try{var g=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h=new Error().stack;h&&(g._sentryDebugIds=g._sentryDebugIds||{},g._sentryDebugIds[h]="b7763c4e-2f5c-4c4d-990d-0fed9e8660a1",g._sentryDebugIdIdentifier="sentry-dbid-b7763c4e-2f5c-4c4d-990d-0fed9e8660a1")}catch{}})();const _a=["width","height","fill","transform"],ba={key:0},ka=T("path",{d:"M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z"},null,-1),wa=[ka],Sa={key:1},xa=T("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"},null,-1),Ca=T("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Fa=[xa,Ca],Aa={key:2},Ta=T("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L180.65,72a79.48,79.48,0,0,0-54.72-22.09h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27,96,96,0,0,1,192,60.7l18.36-18.36A8,8,0,0,1,224,48ZM186.41,183.29A80,80,0,0,1,75.35,184l18.31-18.31A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66L64,195.3a95.42,95.42,0,0,0,66,26.76h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Ma=[Ta],Ia={key:3},Ra=T("path",{d:"M222,48V96a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h33.52L183.47,72a81.51,81.51,0,0,0-57.53-24h-.46A81.5,81.5,0,0,0,68.19,71.28a6,6,0,1,1-8.38-8.58,93.38,93.38,0,0,1,65.67-26.76H126a93.45,93.45,0,0,1,66,27.53l18,18V48a6,6,0,0,1,12,0ZM187.81,184.72a81.5,81.5,0,0,1-57.29,23.34h-.46a81.51,81.51,0,0,1-57.53-24L54.48,166H88a6,6,0,0,0,0-12H40a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V174.48l18,18.05a93.45,93.45,0,0,0,66,27.53h.52a93.38,93.38,0,0,0,65.67-26.76,6,6,0,1,0-8.38-8.58Z"},null,-1),Ua=[Ra],Ea={key:4},Va=T("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),La=[Va],Ba={key:5},Na=T("path",{d:"M220,48V96a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h38.34L184.89,70.54A84,84,0,0,0,66.8,69.85a4,4,0,1,1-5.6-5.72,92,92,0,0,1,129.34.76L212,86.34V48a4,4,0,0,1,8,0ZM189.2,186.15a83.44,83.44,0,0,1-58.68,23.91h-.47a83.52,83.52,0,0,1-58.94-24.6L49.66,164H88a4,4,0,0,0,0-8H40a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V169.66l21.46,21.45A91.43,91.43,0,0,0,130,218.06h.51a91.45,91.45,0,0,0,64.28-26.19,4,4,0,1,0-5.6-5.72Z"},null,-1),$a=[Na],Ha={name:"PhArrowsClockwise"},Da=B({...Ha,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(g){const h=g,o=H("weight","regular"),k=H("size","1em"),n=H("color","currentColor"),l=H("mirrored",!1),f=U(()=>{var c;return(c=h.weight)!=null?c:o}),x=U(()=>{var c;return(c=h.size)!=null?c:k}),_=U(()=>{var c;return(c=h.color)!=null?c:n}),p=U(()=>h.mirrored!==void 0?h.mirrored?"scale(-1, 1)":void 0:l?"scale(-1, 1)":void 0);return(c,y)=>(d(),F("svg",Ze({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:x.value,height:x.value,fill:_.value,transform:p.value},c.$attrs),[We(c.$slots,"default"),f.value==="bold"?(d(),F("g",ba,wa)):f.value==="duotone"?(d(),F("g",Sa,Fa)):f.value==="fill"?(d(),F("g",Aa,Ma)):f.value==="light"?(d(),F("g",Ia,Ua)):f.value==="regular"?(d(),F("g",Ea,La)):f.value==="thin"?(d(),F("g",Ba,$a)):w("",!0)],16,_a))}}),Pa=B({__name:"ThreadSelectorModal",props:{showThreadModal:{type:Boolean},stage:{},executionConfig:{}},emits:["fix-invalid-json","update:execution-config","update:show-thread-modal"],setup(g,{emit:h}){const o=()=>{h("update:show-thread-modal",!1),K.writeTestData(k.threadData)};ze(async()=>k.threadData=await K.readTestData());const k=Oe({threadData:"{}"});return(n,l)=>(d(),b(e(re),{open:n.showThreadModal,footer:null,onCancel:o},{default:t(()=>[a(da,{stage:n.stage,"execution-config":n.executionConfig,"onUpdate:executionConfig":l[0]||(l[0]=f=>h("update:execution-config",f)),"onUpdate:showThreadModal":l[1]||(l[1]=f=>h("update:show-thread-modal",f)),onFixInvalidJson:l[2]||(l[2]=f=>h("fix-invalid-json",f,f))},null,8,["stage","execution-config"])]),_:1},8,["open"]))}});const Wa=W(Pa,[["__scopeId","data-v-24845f55"]]),pe=g=>(ie("data-v-b2ed6a6d"),g=g(),de(),g),Za=pe(()=>T("i",null,"string",-1)),za=pe(()=>T("i",null,"string list",-1)),Oa=B({__name:"FormNotificationSettings",props:{form:{}},setup(g){const o=S(g.form);return(k,n)=>(d(),F(ue,null,[a(e(se),{layout:"vertical"},{default:t(()=>[a(e(N),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:t(()=>[v(" Thread waiting "),a(e(ne),{checked:o.value.notificationTrigger.enabled,"onUpdate:checked":n[0]||(n[0]=l=>o.value.notificationTrigger.enabled=l)},{default:t(()=>[v(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(L),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:t(()=>[v(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(C),{label:"Variable name"},{default:t(()=>[a(e(A),{value:o.value.notificationTrigger.variable_name,"onUpdate:value":n[1]||(n[1]=l=>o.value.notificationTrigger.variable_name=l),disabled:!o.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(pa),{type:"info"},{message:t(()=>[a(e(L),null,{default:t(()=>[v(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),Za,v(" or a "),za,v(". ")]),_:1})]),_:1})],64))}});const ja=W(Oa,[["__scopeId","data-v-b2ed6a6d"]]),Qa=B({__name:"FormSettings",props:{form:{}},setup(g){const o=S(g.form);return(k,n)=>(d(),b(e(se),{layout:"vertical",class:"form-settings"},{default:t(()=>[a(Ie,{runtime:o.value},null,8,["runtime"]),a(e(C),{label:"Form name"},{default:t(()=>[a(e(A),{value:o.value.title,"onUpdate:value":n[0]||(n[0]=l=>o.value.title=l),type:"text",onChange:n[1]||(n[1]=l=>{var f;return o.value.title=(f=l.target.value)!=null?f:""})},null,8,["value"])]),_:1}),a(e(N),{level:3},{default:t(()=>[v(" Texts ")]),_:1}),a(e(N),{level:4},{default:t(()=>[v(" Welcome Screen ")]),_:1}),a(e(C),{label:"Title"},{default:t(()=>[a(e(A),{value:o.value.welcomeTitle,"onUpdate:value":n[2]||(n[2]=l=>o.value.welcomeTitle=l),type:"text",placeholder:o.value.title,disabled:o.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(C),{label:"Description"},{default:t(()=>[a(e(A),{value:o.value.startMessage,"onUpdate:value":n[3]||(n[3]=l=>o.value.startMessage=l),type:"text",disabled:o.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(C),{label:"Start button label"},{default:t(()=>[a(e(A),{value:o.value.startButtonText,"onUpdate:value":n[4]||(n[4]=l=>o.value.startButtonText=l),type:"text",placeholder:"Start",disabled:o.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(C),null,{default:t(()=>[a(e(le),{checked:o.value.autoStart,"onUpdate:checked":n[5]||(n[5]=l=>o.value.autoStart=l)},{default:t(()=>[v("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(N),{level:4},{default:t(()=>[v(" End Screen ")]),_:1}),a(e(C),{label:"End text"},{default:t(()=>[a(e(A),{value:o.value.endMessage,"onUpdate:value":n[6]||(n[6]=l=>o.value.endMessage=l),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(C),{label:"Restart button label"},{default:t(()=>[a(e(A),{value:o.value.restartButtonText,"onUpdate:value":n[7]||(n[7]=l=>o.value.restartButtonText=l),placeholder:"Restart",type:"text",disabled:!o.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(C),{help:!o.value.isInitial&&"Only initial forms can be restarted"},{default:t(()=>[a(e(le),{checked:o.value.allowRestart,"onUpdate:checked":n[8]||(n[8]=l=>o.value.allowRestart=l),disabled:!o.value.isInitial},{default:t(()=>[v("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(N),{level:4},{default:t(()=>[v(" Alert Messages ")]),_:1}),a(e(C),{label:"Error message"},{default:t(()=>[a(e(A),{value:o.value.errorMessage,"onUpdate:value":n[9]||(n[9]=l=>o.value.errorMessage=l),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}});const qa=W(Qa,[["__scopeId","data-v-aff64cb2"]]),Ka=B({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(g,{emit:h}){const k=S(n(g.queryParams));function n(p){return Object.entries(p).map(([c,y])=>({key:c,value:y,id:Math.random().toString()}))}function l(){const p={};return k.value.forEach(({key:c,value:y})=>{p[c]=y}),p}const f=(p,c,y)=>{k.value[p]={key:c,value:y},h("update:query-params",l())},x=()=>{const p=k.value.length;k.value.push({key:`param-${p}`,value:"value"}),h("update:query-params",l())},_=p=>{k.value.splice(p,1),h("update:query-params",l())};return(p,c)=>(d(),b(e(re),{open:p.open,onCancel:p.close},{footer:t(()=>[a(e(I),{type:"primary",onClick:p.close},{default:t(()=>[v("OK")]),_:1},8,["onClick"])]),default:t(()=>[a(e(P),{vertical:"",gap:"20"},{default:t(()=>[a(e(L),null,{default:t(()=>[v("Query params")]),_:1}),(d(!0),F(ue,null,je(k.value,(y,E)=>(d(),b(e(C),{key:E},{default:t(()=>[a(e(ca),null,{default:t(()=>[a(e(A),{value:y.key,"onUpdate:value":i=>y.key=i,type:"text",placeholder:"name",onChange:()=>f(E,y.key,y.value)},null,8,["value","onUpdate:value","onChange"]),a(e(A),{value:y.value,"onUpdate:value":i=>y.value=i,type:"text",placeholder:"value",disabled:y.key===e(q),onChange:()=>f(E,y.key,y.value)},null,8,["value","onUpdate:value","disabled","onChange"]),a(e(I),{danger:"",onClick:i=>_(E)},{default:t(()=>[v("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(C),null,{default:t(()=>[a(e(I),{type:"dashed",style:{width:"100%"},onClick:x},{default:t(()=>[v(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),Ga=g=>(ie("data-v-962e8c7c"),g=g(),de(),g),Ja={key:0},Xa={key:1},Ya=Ga(()=>T("br",null,null,-1)),et={class:"form-preview-container"},at=B({__name:"FormEditor",setup(g){var ee;const h=Qe(),o=qe(),k=Ae(),n=Te(),l=S(null),f=S("source-code"),x=S(null),_=S(null),p=S(null),c=S({}),y=S(!1),E=s=>i.value={...i.value,attached:!!s},i=S({attached:!1,stageRunId:null,pendingFork:!1,isInitial:!1}),V=U(()=>{var s;return(s=m.value)!=null&&s.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:i.value.attached&&i.value.pendingFork?{title:"Past thread selected",message:"Fork the selected thread to run the workflow"}:!i.value.isInitial&&i.value.attached&&!i.value.stageRunId?{title:"No thread selected",message:"Select a thread to run the workflow"}:null}),ce=(s,r)=>{var u;(u=l.value)==null||u.setHighlight(s,r)},me=()=>{var s,r;(s=l.value)==null||s.restartEditor(),(r=l.value)==null||r.startPreviewMode()},ve=U(()=>!i.value.isInitial&&i.value.attached&&!!(i.value.pendingFork||!i.value.stageRunId));Ke(()=>i.value.stageRunId?c.value={...c.value,[q]:i.value.stageRunId}:null);const{result:m,loading:fe,refetch:ge}=oa(async()=>{const[s,r]=await Promise.all([ia.get(o.params.id),K.get()]);return i.value.isInitial=s.isInitial,Ye({form:s,workspace:r})});oe([()=>i.value.attached,c,m],()=>{G()});function he(){var r;if(!m.value)return;const s=m.value.form.codeContent;(r=l.value)==null||r.updateLocalEditorCode(s),G()}function G(){if(!m.value)return;const s=!i.value.attached;p.value=m.value.form.makeRunnerData(m.value.workspace),x.value=new He({formRunnerData:p.value,logService:X,connectionManager:new De(m.value.form.id,"editor",c.value,s),onFormStart:me,onFormEnd:ye,onRedirect:we,onStateUpdate:u=>_.value=u,onStackTraceUpdate:ce});const r=x.value.getState();_.value=r.formState}const ye=()=>{var s,r,u;i.value={attached:!1,stageRunId:null,pendingFork:!1,isInitial:(r=(s=m.value)==null?void 0:s.form.isInitial)!=null?r:!1},(u=l.value)==null||u.restartEditor()};function _e(){var s,r;(s=Z.value)==null||s.closeConsole(),(r=x.value)==null||r.start()}function J(){var s,r;(s=l.value)==null||s.restartEditor(),(r=x.value)==null||r.resetForm()}function be(){h.push({name:"stages"})}const Z=S(null),ke=s=>{!m.value||(m.value.form.file=s)},X=Le.create();function we(s,r){Pe("editor",h,s,r)}const Se=()=>{var u;let s=`/${(u=m.value)==null?void 0:u.form.path}`;const r=new URLSearchParams(c.value);i.value.attached&&i.value.stageRunId&&r.set(q,i.value.stageRunId),window.open(`${s}?${r.toString()}`,"_blank")},z=S(!1),xe=U(()=>{if(!p.value)return"";const s=Object.entries(c.value),r="?"+s.map(([M,R])=>`${M}=${R}`).join("&"),u=s.length?r:"";return`/${p.value.path}${u}`}),Y=new Ge(Je.boolean(),"dontShowReloadHelper"),O=S((ee=Y.get())!=null?ee:!1),Ce=()=>{Y.set(!0),O.value=!0};return oe(()=>o.params.id,()=>{ge()}),(s,r)=>(d(),b(Me,null,Xe({navbar:t(()=>[e(m)?(d(),b(e(va),{key:0,title:e(m).form.title,style:{padding:"5px 25px",border:"1px solid #f6f6f6"},onBack:be},{extra:t(()=>[a(ma,{"docs-path":"concepts/forms","editing-model":e(m).form},null,8,["editing-model"])]),_:1},8,["title"])):w("",!0)]),content:t(()=>[e(m)?(d(),b(Ue,{key:0},{left:t(()=>[a(e(fa),{"active-key":f.value,"onUpdate:activeKey":r[0]||(r[0]=u=>f.value=u)},{rightExtra:t(()=>[a(Be,{model:e(m).form,onSave:he},null,8,["model"])]),default:t(()=>[a(e(Q),{key:"source-code",tab:"Source code"}),a(e(Q),{key:"settings",tab:"Settings"}),a(e(Q),{key:"notifications",tab:"Notifications"})]),_:1},8,["active-key"]),f.value==="source-code"?(d(),b(Ee,{key:0,ref_key:"code",ref:l,script:e(m).form,workspace:e(m).workspace,onUpdateFile:ke},null,8,["script","workspace"])):w("",!0),f.value==="settings"?(d(),b(qa,{key:1,form:e(m).form},null,8,["form"])):w("",!0),f.value==="notifications"?(d(),b(ja,{key:2,form:e(m).form},null,8,["form"])):w("",!0),y.value?(d(),b(Wa,{key:3,"execution-config":i.value,"onUpdate:executionConfig":r[1]||(r[1]=u=>i.value=u),"show-thread-modal":y.value,"onUpdate:showThreadModal":r[2]||(r[2]=u=>y.value=u),stage:e(m).form,onFixInvalidJson:r[3]||(r[3]=(u,M)=>{var R;return(R=Z.value)==null?void 0:R.fixJson(u,M)})},null,8,["execution-config","show-thread-modal","stage"])):w("",!0)]),right:t(()=>[a(e(P),{gap:"10",align:"center",justify:"right",style:{"margin-top":"6px"}},{default:t(()=>{var u;return[a(e(L),null,{default:t(()=>[v(j(i.value.attached?"Workflow ON":"Workflow OFF"),1)]),_:1}),a(e(ne),{disabled:!!_.value&&e($).includes((u=_.value)==null?void 0:u.type),checked:i.value.attached,"onUpdate:checked":E},null,8,["disabled","checked"]),a(e(ga),{dot:ve.value},{default:t(()=>{var M;return[a(e(I),{disabled:!!_.value&&e($).includes((M=_.value)==null?void 0:M.type),style:{display:"flex",gap:"5px"},onClick:r[4]||(r[4]=R=>y.value=!0)},{icon:t(()=>[a(e(sa),{size:"20"})]),default:t(()=>[v("Thread")]),_:1},8,["disabled"])]}),_:1},8,["dot"])]}),_:1}),a(e(ha),{style:{margin:"7px 0px 16px"}}),e(fe)||!p.value||!_.value?(d(),b(e(ea),{key:0})):w("",!0),_.value&&p.value?(d(),b(e(P),{key:1,vertical:"",gap:"10",style:{height:"100%",overflow:"hidden"}},{default:t(()=>[a(e(P),{gap:"small"},{default:t(()=>[_.value.type&&e(Ne).includes(_.value.type)?(d(),b(e(aa),{key:0,placement:"bottom",open:O.value?void 0:!0},{content:t(()=>[O.value?(d(),F("span",Ja,"Reload form")):(d(),F("span",Xa,[v(" You can reload the form here"),Ya,a(e(ta),{onClick:Ce},{default:t(()=>[v("Don't show this again")]),_:1})]))]),default:t(()=>[a(e(I),{disabled:!!V.value,onClick:J},{default:t(()=>[a(e(Da),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["open"])):w("",!0),e($).includes(_.value.type)?(d(),b(e(D),{key:1,placement:"bottom"},{title:t(()=>[v("Stop form")]),default:t(()=>[a(e(I),{onClick:J},{default:t(()=>[a(e(Ve),{size:"20"})]),_:1})]),_:1})):w("",!0),_.value.type==="waiting"?(d(),b(e(D),{key:2,placement:"bottom"},{title:t(()=>[v("Start form")]),default:t(()=>[a(e(I),{disabled:!!V.value,onClick:_e},{default:t(()=>[a(e(la),{size:"20"})]),_:1},8,["disabled"])]),_:1})):w("",!0),a(e(A),{disabled:"",value:xe.value},null,8,["value"]),a(e(D),{placement:"bottom"},{title:t(()=>[v("Edit query params")]),default:t(()=>{var u;return[a(e(I),{disabled:!!_.value&&e($).includes((u=_.value)==null?void 0:u.type),onClick:r[5]||(r[5]=M=>z.value=!0)},{default:t(()=>[a(e(ua),{size:"20"})]),_:1},8,["disabled"])]}),_:1}),a(e(D),{placement:"bottom"},{title:t(()=>[v("Open in Full Screen")]),default:t(()=>[a(e(I),{target:"_blank","aria-label":"Open in Full Screen","aria-describedby":"sss",disabled:!i.value.attached,onClick:Se},{default:t(()=>[a(e(na),{size:"20"})]),_:1},8,["disabled"])]),_:1})]),_:1}),T("div",et,[V.value?(d(),b(e(ya),{key:0,class:"unsaved-changes"},{default:t(()=>[a(e(L),{style:{"font-size":"18px","font-weight":"500"}},{default:t(()=>[v(j(V.value.title),1)]),_:1}),a(e(L),{style:{"margin-bottom":"6px"}},{default:t(()=>[v(j(V.value.message),1)]),_:1})]),_:1})):w("",!0),a(ra,{class:"center","main-color":p.value.mainColor,background:p.value.theme,"font-family":p.value.fontFamily,locale:p.value.language},{default:t(()=>{var u,M,R,ae,te;return[e(n).state.workspace?(d(),b(Fe,{key:0,"current-path":e(m).form.path,"hide-login":!0,"runner-data":e(n).state.workspace},null,8,["current-path","runner-data"])):w("",!0),a($e,{"is-preview":"",class:"runner","form-runner-data":p.value,"form-state":_.value,disabled:!!V.value,"user-email":(u=e(k).user)==null?void 0:u.claims.email,onUpdateWidgetErrors:(M=x.value)==null?void 0:M.updateWidgetFrontendErrors,onUpdateWidgetValue:(R=x.value)==null?void 0:R.updateWidgetValue,onActionClicked:(ae=x.value)==null?void 0:ae.handleActionClick,onAutoFillClicked:(te=x.value)==null?void 0:te.handleAutofillClick},null,8,["form-runner-data","form-state","disabled","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onAutoFillClicked"])]}),_:1},8,["main-color","background","font-family","locale"])])]),_:1})):w("",!0),a(Ka,{"query-params":c.value,"onUpdate:queryParams":r[6]||(r[6]=u=>c.value=u),open:z.value,close:()=>z.value=!1},null,8,["query-params","open","close"])]),_:1})):w("",!0)]),_:2},[e(m)?{name:"footer",fn:t(()=>[a(Re,{ref_key:"smartConsole",ref:Z,"stage-type":"forms",stage:e(m).form,"log-service":e(X),workspace:e(m).workspace},null,8,["stage","log-service","workspace"])]),key:"0"}:void 0]),1024))}});const pl=W(at,[["__scopeId","data-v-962e8c7c"]]);export{pl as default};
//# sourceMappingURL=FormEditor.9b532b4a.js.map
