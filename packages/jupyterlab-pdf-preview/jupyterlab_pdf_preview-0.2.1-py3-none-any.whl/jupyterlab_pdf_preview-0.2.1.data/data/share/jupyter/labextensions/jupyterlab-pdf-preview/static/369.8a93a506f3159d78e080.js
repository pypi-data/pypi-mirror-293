/*! For license information please see 369.8a93a506f3159d78e080.js.LICENSE.txt */
"use strict";(self.webpackChunkjupyterlab_pdf_preview=self.webpackChunkjupyterlab_pdf_preview||[]).push([[369,848],{59:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var n=i(313),r=i(848),s=i(345),o=i(584),d=i(602),p=i(460);const l="application/pdf",a=250,f=1,u=10,c=i.p+"050229fd2a4f7514cd1e.mjs?file-url";o.pdfjs.GlobalWorkerOptions.workerSrc=c;const h={display:"none",position:"fixed",zIndex:100,overflow:"hidden",border:`${f}px solid var(--jp-border-color1)`,background:"white"};function g({pdfContent:e,clientX:t,clientY:i,parentElement:n}){const[d,p]=(0,s.useState)(null);(0,s.useEffect)((()=>{p(null)}),[e]);let c={};if(null!==d){const{top:e,left:r,hide:s}=function(e,t,i,n){const{top:r,left:s,width:o,height:d}=i.getBoundingClientRect(),p=e-s,l=t-r,c=a+2*f,h=n+2*f,g=c+u,v=h+u,_=l+v>d?Math.max(l-v,0):l+u;let P=Math.max(p-g,0);const w=()=>p>=P&&p<=P+c&&l>=_&&l<=_+h;return w()&&(P=Math.min(p+u,o-c)),{top:_,left:P,hide:w()}}(t,i,n,d);s||(c={display:void 0,top:e,left:r})}return(0,r.jsx)("div",{style:{...h,...c},children:(0,r.jsx)(o.Document,{file:`data:${l};base64,${e}`,children:(0,r.jsx)(o.Thumbnail,{pageNumber:1,width:a,onRenderSuccess:({height:e})=>p(e)})})})}function v({update:e,props:t}){return(0,r.jsx)(p.UseSignal,{signal:e,children:()=>(0,r.jsx)(g,{...t})})}class _ extends p.ReactWidget{constructor(e){super(),this._update=new d.Signal(this),this._props=e}render(){return(0,r.jsx)(v,{update:this._update,props:this._props})}updatePdfContent(e){this._props.pdfContent=e,this._update.emit()}updatePosition(e,t,i){this._props.clientX=e,this._props.clientY=t,this._props.parentElement=i,this._update.emit()}}const P={id:"jupyterlab-pdf-preview:plugin",description:"Preview PDF files in the file browser on hover.",autoStart:!0,requires:[n.IDefaultFileBrowser],activate({serviceManager:e},t){const{dirListing:i,node:n}=t,r={pdfPreviewWidget:null,currentPdfPath:null};n.addEventListener("mouseover",(({target:s,clientX:o,clientY:d})=>{const{itemNodes:p,itemModels:a}=i;let f=null;if(s instanceof Node)for(let e=0;e<p.length;++e)if(p[e].contains(s)){const{path:t,mimetype:i}=a[e];if(i===l){f=t;break}}f!==r.currentPdfPath&&(r.currentPdfPath=f,null!==f?(async()=>{const{content:i}=await e.contents.get(f);if(f!==r.currentPdfPath)return;const{pdfPreviewWidget:s}=r;if(null===s||s.isDisposed){const e=new _({pdfContent:i,clientX:o,clientY:d,parentElement:n});t.addWidget(e),r.pdfPreviewWidget=e}else s.updatePdfContent(i)})():null===r.pdfPreviewWidget||r.pdfPreviewWidget.isDisposed||r.pdfPreviewWidget.dispose())})),n.addEventListener("mouseleave",(()=>{r.currentPdfPath=null;const{pdfPreviewWidget:e}=r;null===e||e.isDisposed||e.dispose()})),n.addEventListener("mousemove",(({clientX:e,clientY:t})=>{const{pdfPreviewWidget:i}=r;null===i||i.isDisposed||i.updatePosition(e,t,n)}))}};Object.defineProperty(n.FileBrowser.prototype,"dirListing",{get(){return this.listing}}),Object.defineProperty(n.DirListing.prototype,"itemModels",{get(){return this._sortedItems}}),Object.defineProperty(n.DirListing.prototype,"itemNodes",{get(){return this._items}});const w=P},20:(e,t,i)=>{var n=i(345),r=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,i){var n,p={},l=null,a=null;for(n in void 0!==i&&(l=""+i),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(a=t.ref),t)s.call(t,n)&&!d.hasOwnProperty(n)&&(p[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===p[n]&&(p[n]=t[n]);return{$$typeof:r,type:e,key:l,ref:a,props:p,_owner:o.current}}t.jsx=p,t.jsxs=p},848:(e,t,i)=>{e.exports=i(20)}}]);