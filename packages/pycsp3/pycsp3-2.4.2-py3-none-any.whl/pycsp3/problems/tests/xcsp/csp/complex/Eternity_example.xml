<instance format="XCSP3" type="CSP">
  <variables>
    <array id="x" note="x[i][j] is the index of the piece at row i and column j" size="[7][5]"> 0..34 </array>
    <array id="top" note="top[i][j] is the value at the top of the piece at row i and column j" size="[8][5]"> 0..8 </array>
    <array id="lft" note="lft[i][j] is the value at the left of the piece at row i and column j" size="[7][6]"> 0..8 </array>
  </variables>
  <constraints>
    <allDifferent note="all pieces must be placed (only once)"> x[][] </allDifferent>
    <group note="all pieces must be valid (i.e., must correspond to those given initially, possibly after applying some rotation)">
      <extension>
        <list> %... </list>
        <supports> (0,0,0,1,1)(0,0,1,1,0)(0,1,0,0,1)(0,1,1,0,0)(1,0,0,1,2)(1,0,1,2,0)(1,1,2,0,0)(1,2,0,0,1)(2,0,0,2,2)(2,0,2,2,0)(2,2,0,0,2)(2,2,2,0,0)(3,0,0,3,2)(3,0,3,2,0)(3,2,0,0,3)(3,3,2,0,0)(4,0,1,4,1)(4,1,0,1,4)(4,1,4,1,0)(4,4,1,0,1)(5,0,1,5,2)(5,1,5,2,0)(5,2,0,1,5)(5,5,2,0,1)(6,0,1,6,2)(6,1,6,2,0)(6,2,0,1,6)(6,6,2,0,1)(7,0,1,7,1)(7,1,0,1,7)(7,1,7,1,0)(7,7,1,0,1)(8,0,1,7,3)(8,1,7,3,0)(8,3,0,1,7)(8,7,3,0,1)(9,0,2,4,1)(9,1,0,2,4)(9,2,4,1,0)(9,4,1,0,2)(10,0,2,4,3)(10,2,4,3,0)(10,3,0,2,4)(10,4,3,0,2)(11,0,2,5,2)(11,2,0,2,5)(11,2,5,2,0)(11,5,2,0,2)(12,0,2,6,3)(12,2,6,3,0)(12,3,0,2,6)(12,6,3,0,2)(13,0,2,7,1)(13,1,0,2,7)(13,2,7,1,0)(13,7,1,0,2)(14,0,2,7,3)(14,2,7,3,0)(14,3,0,2,7)(14,7,3,0,2)(15,0,3,5,1)(15,1,0,3,5)(15,3,5,1,0)(15,5,1,0,3)(16,0,3,5,3)(16,3,0,3,5)(16,3,5,3,0)(16,5,3,0,3)(17,0,3,6,2)(17,2,0,3,6)(17,3,6,2,0)(17,6,2,0,3)(18,0,3,7,1)(18,1,0,3,7)(18,3,7,1,0)(18,7,1,0,3)(19,0,3,7,3)(19,3,0,3,7)(19,3,7,3,0)(19,7,3,0,3)(20,4,4,5,5)(20,4,5,5,4)(20,5,4,4,5)(20,5,5,4,4)(21,4,4,6,8)(21,4,6,8,4)(21,6,8,4,4)(21,8,4,4,6)(22,4,4,8,5)(22,4,8,5,4)(22,5,4,4,8)(22,8,5,4,4)(23,4,5,8,5)(23,5,4,5,8)(23,5,8,5,4)(23,8,5,4,5)(24,4,6,5,7)(24,5,7,4,6)(24,6,5,7,4)(24,7,4,6,5)(25,4,6,6,8)(25,6,6,8,4)(25,6,8,4,6)(25,8,4,6,6)(26,4,6,7,5)(26,5,4,6,7)(26,6,7,5,4)(26,7,5,4,6)(27,4,7,5,5)(27,5,4,7,5)(27,5,5,4,7)(27,7,5,5,4)(28,4,7,8,7)(28,7,4,7,8)(28,7,8,7,4)(28,8,7,4,7)(29,4,8,5,8)(29,5,8,4,8)(29,8,4,8,5)(29,8,5,8,4)(30,5,6,6,6)(30,6,5,6,6)(30,6,6,5,6)(30,6,6,6,5)(31,5,7,8,8)(31,7,8,8,5)(31,8,5,7,8)(31,8,8,5,7)(32,6,6,8,7)(32,6,8,7,6)(32,7,6,6,8)(32,8,7,6,6)(33,6,6,8,8)(33,6,8,8,6)(33,8,6,6,8)(33,8,8,6,6)(34,6,7,8,8)(34,7,8,8,6)(34,8,6,7,8)(34,8,8,6,7) </supports>
      </extension>
      <args> x[0][0] top[0][0] lft[0][1] top[1][0] lft[0][0] </args>
      <args> x[0][1] top[0][1] lft[0][2] top[1][1] lft[0][1] </args>
      <args> x[0][2] top[0][2] lft[0][3] top[1][2] lft[0][2] </args>
      <args> x[0][3] top[0][3] lft[0][4] top[1][3] lft[0][3] </args>
      <args> x[0][4] top[0][4] lft[0][5] top[1][4] lft[0][4] </args>
      <args> x[1][0] top[1][0] lft[1][1] top[2][0] lft[1][0] </args>
      <args> x[1][1] top[1][1] lft[1][2] top[2][1] lft[1][1] </args>
      <args> x[1][2] top[1][2] lft[1][3] top[2][2] lft[1][2] </args>
      <args> x[1][3] top[1][3] lft[1][4] top[2][3] lft[1][3] </args>
      <args> x[1][4] top[1][4] lft[1][5] top[2][4] lft[1][4] </args>
      <args> x[2][0] top[2][0] lft[2][1] top[3][0] lft[2][0] </args>
      <args> x[2][1] top[2][1] lft[2][2] top[3][1] lft[2][1] </args>
      <args> x[2][2] top[2][2] lft[2][3] top[3][2] lft[2][2] </args>
      <args> x[2][3] top[2][3] lft[2][4] top[3][3] lft[2][3] </args>
      <args> x[2][4] top[2][4] lft[2][5] top[3][4] lft[2][4] </args>
      <args> x[3][0] top[3][0] lft[3][1] top[4][0] lft[3][0] </args>
      <args> x[3][1] top[3][1] lft[3][2] top[4][1] lft[3][1] </args>
      <args> x[3][2] top[3][2] lft[3][3] top[4][2] lft[3][2] </args>
      <args> x[3][3] top[3][3] lft[3][4] top[4][3] lft[3][3] </args>
      <args> x[3][4] top[3][4] lft[3][5] top[4][4] lft[3][4] </args>
      <args> x[4][0] top[4][0] lft[4][1] top[5][0] lft[4][0] </args>
      <args> x[4][1] top[4][1] lft[4][2] top[5][1] lft[4][1] </args>
      <args> x[4][2] top[4][2] lft[4][3] top[5][2] lft[4][2] </args>
      <args> x[4][3] top[4][3] lft[4][4] top[5][3] lft[4][3] </args>
      <args> x[4][4] top[4][4] lft[4][5] top[5][4] lft[4][4] </args>
      <args> x[5][0] top[5][0] lft[5][1] top[6][0] lft[5][0] </args>
      <args> x[5][1] top[5][1] lft[5][2] top[6][1] lft[5][1] </args>
      <args> x[5][2] top[5][2] lft[5][3] top[6][2] lft[5][2] </args>
      <args> x[5][3] top[5][3] lft[5][4] top[6][3] lft[5][3] </args>
      <args> x[5][4] top[5][4] lft[5][5] top[6][4] lft[5][4] </args>
      <args> x[6][0] top[6][0] lft[6][1] top[7][0] lft[6][0] </args>
      <args> x[6][1] top[6][1] lft[6][2] top[7][1] lft[6][1] </args>
      <args> x[6][2] top[6][2] lft[6][3] top[7][2] lft[6][2] </args>
      <args> x[6][3] top[6][3] lft[6][4] top[7][3] lft[6][3] </args>
      <args> x[6][4] top[6][4] lft[6][5] top[7][4] lft[6][4] </args>
    </group>
    <block note="putting special value 0 on borders">
      <group>
        <instantiation>
          <list> %... </list>
          <values> 0x5 </values>
        </instantiation>
        <args> top[0][] </args>
        <args> top[7][] </args>
      </group>
      <group>
        <instantiation>
          <list> %... </list>
          <values> 0x7 </values>
        </instantiation>
        <args> lft[][0] </args>
        <args> lft[][5] </args>
      </group>
    </block>
  </constraints>
</instance>
