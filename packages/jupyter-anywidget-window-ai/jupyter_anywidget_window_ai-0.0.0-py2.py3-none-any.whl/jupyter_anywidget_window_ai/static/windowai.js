async function p({model:s,el:i}){i.classList.add("jupyter_anywidget_window_ai");let e=document.createElement("div");e.setAttribute("name","response"),e.style.whiteSpace="pre-wrap",e.style.fontFamily="monospace",e.style.padding="10px",e.style.border="1px solid #ccc",e.style.borderRadius="5px",e.style.marginTop="10px",e.style.minHeight="100px",e.style.maxHeight="300px",e.style.overflowY="auto",i.appendChild(e);let o=null;s.on("change:output",()=>{e.textContent=s.get("output")}),s.on("msg:custom",async t=>{if(!o)try{o=await window.ai.assistant.create({systemPrompt:s.get("system_prompt"),initialPrompts:s.get("initial_prompts")})}catch(r){console.error("Failed to create AI session:",r),n("Error: Failed to create AI session",t.request_id);return}if(t.action==="prompt")try{e.textContent="[Processing prompt...]";let r=await o.prompt(t.message);n(r,t.request_id)}catch(r){console.error("Error getting AI response:",r),n("Error: "+r.message,t.request_id)}else if(t.action==="prompt_streaming")try{let r=await o.promptStreaming(t.message),c="";for await(let a of r)n(a,t.request_id)}catch(r){console.error("Error streaming AI response:",r),n("Error: "+r.message,t.request_id)}else t.action==="destroy"&&(o&&(o.destroy(),o=null),n("Session destroyed",t.request_id))});function n(t,r){s.set("output",t),s.set("_request_id",r),s.save_changes()}}var u={render:p};export{u as default};
